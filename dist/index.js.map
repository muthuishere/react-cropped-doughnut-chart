{"version":3,"file":"index.js","sources":["../src/core/builder/elements.js","../src/core/components/HtmlContainerElement.js","../src/core/draw/calculations.js","../src/core/draw/arc.js","../src/core/shared/randomizer.js","../src/core/shared/formatter.js","../src/core/draw/textInArc.js","../src/core/components/SliceElement.js","../src/core/components/Animations.js","../src/core/shared/config.js","../src/core/DoughnutElement.js","../src/index.js"],"sourcesContent":["\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg'\nexport function createElement(name, attribs) {\n  const xmlns = SVG_NAMESPACE\n  const svgElem = document.createElementNS(xmlns, name)\n\n  attribs.forEach(([name, value]) => svgElem.setAttributeNS(null, name, value))\n\n  return svgElem\n}\n\nexport function createHtmlElement(name, attribs) {\n  const element = document.createElement(name)\n\n  attribs.forEach(([name, value]) => element.setAttribute(name, value))\n\n  return element\n}\n\n\nexport function setAttributeForSvg(element, name, value) {\n  element.setAttributeNS(null, name, value)\n}\n\n\n\nexport function insertStyles(styles) {\n  if(document.head.querySelector(\"#doughnut-cropped-chart-styles\")) {\n    return\n  }\n  var styleSheet = document.createElement('style')\n  styleSheet.setAttribute('type', 'text/css')\n  styleSheet.setAttribute('id', 'doughnut-cropped-chart-styles')\n\n  styleSheet.innerHTML = styles\n  document.head.appendChild(styleSheet)\n}\n\nexport function createContainer(){\n  const container = createElement('g', [])\n  return container;\n}\nexport function createCircle({ x, y }, radius, defaultcolor) {\n  return createElement('circle', [\n    ['cx', x],\n    ['cy', y],\n    ['r', radius],\n    ['fill', defaultcolor]\n  ])\n}\n","import { createElement, createHtmlElement } from '../builder/elements'\n\nexport const PADDING_RATIO = 0.8\nexport function getHtmlContainerElement({ x, y }, radius, imgUrl, title, textColor) {\n  // let {x,y} = polarToCartesian(centerX, centerY, radius, 90);\n\n  const mainElement = createHtmlElement('div', [\n    [\n      'style',\n      'display: table-cell; text-align: center; vertical-align: middle;color:' +\n        textColor +\n        ';'\n    ]\n  ])\n  const paddedRadius = radius * PADDING_RATIO\n\n  const imgElement = createHtmlElement('img', [\n    ['src', imgUrl],\n    ['width', paddedRadius],\n    ['height', paddedRadius]\n  ])\n  const breakElement = createHtmlElement('br', [])\n  mainElement.appendChild(imgElement)\n  mainElement.appendChild(breakElement)\n  mainElement.innerHTML += title\n\n  const container = createHtmlElement('div', [\n    ['style', 'display: table; font-size: 24px; width: 100%; height: 100%;']\n  ])\n  container.appendChild(mainElement)\n\n  const paddedX = x - paddedRadius\n  const paddedY = y - paddedRadius\n  // y = centerY + radius;\n  const width = paddedRadius * 2\n  const height = paddedRadius * 2\n  //  <foreignObject x=\"20\" y=\"20\" width=\"160\" height=\"160\">\n  const foreignObject = createElement('foreignObject', [\n    ['x', paddedX],\n    ['y', paddedY],\n    ['width', width],\n    ['height', height]\n  ])\n\n  foreignObject.appendChild(container)\n\n  return foreignObject\n}\n","/**\r\n * Convert a polar coordinate (r,theta) to cartesian (x,y). The calculations are x=r*cos(theta) and y=r*sin(theta).\r\n * This Method is used in the DoughnutChart. to calculate the x,y position from center of a sliceElement.\r\n * Usually in Math the origin is Zero, Since the center of the doughnut is the origin, the centerX and centerY are added to the result.\r\n * @param centerX - Center of Circle X\r\n * @param centerY - Center of Circle Y\r\n * @param radius  - Radius of Circle\r\n * @param angleInDegrees - Angle in Degrees\r\n * @returns {{x: *, y: *}}\r\n */\r\nexport function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\r\n\r\n  var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\r\n\r\n  return {\r\n    x: centerX + radius * Math.cos(angleInRadians),\r\n    y: centerY + radius * Math.sin(angleInRadians)\r\n  }\r\n}\r\n\r\n\r\nexport function drawingCoordinatesBetweenInnerAndOuterCircle(\r\n  { innerRadius, outerRadius },\r\n  { startAngle, endAngle },\r\n  { x, y }\r\n) {\r\n  const middleRadius = innerRadius + (outerRadius - innerRadius) / 2 -20\r\n\r\n  const drawingCoordinatesForText = drawingCoordinatesForTextPosition(\r\n    { x, y },\r\n    {\r\n      startAngle,\r\n      endAngle: endAngle\r\n    },\r\n    middleRadius\r\n  )\r\n  return drawingCoordinatesForText\r\n}\r\n\r\n\r\nexport function drawingCoordinatesForTextPosition(\r\n  { x, y },\r\n  { startAngle, endAngle },\r\n  radius\r\n) {\r\n  const startPoint = polarToCartesian(x, y, radius, startAngle)\r\n  const endPoint = polarToCartesian(x, y, radius, endAngle)\r\n\r\n  const arcSweep = endAngle - startAngle <= 180 ? '0' : '1'\r\n\r\n  const d = [\r\n    'M',    endPoint.x,    endPoint.y,\r\n    'A',    radius,    radius,    0,    arcSweep,    0,    startPoint.x,    startPoint.y\r\n\r\n  ].join(' ')\r\n\r\n  return d\r\n}\r\n","import { polarToCartesian } from \"./calculations\";\nimport { createElement } from \"../builder/elements\";\n\n/**\n * Get Drawing Coordinates for an Arc , The arc is a fully closed area in a circle\n *  The arc is drawn from the startAngle to the endAngle\n * The arc is drawn in the clockwise direction\n * @param x - Center of Circle X\n * @param y - Center of Circle Y\n * @param startAngle - Start Angle in Degrees\n * @param endAngle - End Angle in Degrees\n * @param radius - Radius of Circle\n */\nexport function coordinatesForArc(\n  { x, y },\n  { startAngle, endAngle },\n  radius\n) {\n  const startPoint = polarToCartesian(x, y, radius, startAngle);\n  const endPoint = polarToCartesian(x, y, radius, endAngle);\n\n  const arcSweep = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n\n  const d = [\n    \"M\", endPoint.x, endPoint.y,\n    \"A\", radius, radius, 0, arcSweep, 0, startPoint.x, startPoint.y\n  ].join(\" \");\n\n  return d;\n}\n\n/** draw Circle with Path\n *\n * @param containerAttributes\n * @param point\n * @param angles\n * @param radius\n * @returns {*}\n */\n\n\nexport function coordinatesForCircle(\n  { x, y },\n  radius\n) {\n\n\n\n  const d = [\n    \"M\", x-radius, y,\n    \"A\", radius, radius, 0, 1, 0, (radius *2), 0,\n    \"A\", radius, radius, 0, 1, 0, -(radius *2), 0,\n  ].join(\" \");\n\n  return d;\n}\n\nexport function createArc(containerAttributes, point, angles, radius) {\n  const innerArc = createElement(\"path\", containerAttributes);\n  const innerArcData = coordinatesForArc(point, angles, radius);\n  innerArc.setAttributeNS(null, \"d\", innerArcData);\n  return innerArc;\n}\n\nexport function createArcForSlice(\n  point,\n  angles,\n  { outerRadius, innerRadius },\n  color\n  , strokeArray) {\n  const borderWidth = outerRadius - innerRadius;\n\n  const strokeData = strokeArray * -1;\n  const containerAttributes = [\n    [\"fill\", \"none\"],\n    [\"stroke\", color],\n    [\"stroke-width\", borderWidth],\n    [\"stroke-dashoffset\", \"\" + strokeData],\n    [\"stroke-dasharray\", \"\" + strokeArray],\n    [\"class\", \"path-container\"]\n  ];\n\n  const arc = createArc(containerAttributes, point, angles, innerRadius);\n\n  return arc;\n}\n","export function getRandomSixDigitString() {\n  const str = \"\" + Math.floor(Math.random() * (999999 - 1)) + 1;\n  return str.padStart(6, \"0\");\n}\n","import { getRandomSixDigitString } from \"./randomizer\";\n\nconst colors = [\n  \"#FF0000\",\n  \"#FF7F00\",\n  \"#FFFF00\",\n  \"#00FF00\",\n  \"#00FFFF\",\n  \"#0000FF\",\n  \"#8B00FF\"\n];\n\nfunction formatLabel(item) {\n  const { label } = item;\n  if (label) return item;\n  else\n    return {\n      ...item,\n      label: `${item.value}`\n    };\n}\n\nfunction formatColor(item, index) {\n  const { color } = item;\n  if (color) return item;\n  else\n    return {\n      ...item,\n      color: colors[index]\n    };\n}\n\nexport function formatToArrayOfObjects(inputItems) {\n  const isNumber = (currentValue) => typeof currentValue === \"number\";\n  const isAllNumbers = inputItems.every(isNumber);\n  let items = inputItems;\n  if (isAllNumbers) {\n    items = inputItems.map((item) => ({ value: item }));\n  }\n  return items;\n}\n\nexport function reverseString(str) {\n  return str.split(\"\").reverse().join(\"\");\n}\n\nexport function formatItems(inputItems, defaultLabelColor) {\n  const items = formatToArrayOfObjects(inputItems);\n\n  const hasValueProperty = (currentValue) => null != currentValue.value;\n  const isAllValid = items.every(hasValueProperty);\n  if (!isAllValid) {\n    throw new Error(\"Invalid Data Found, All items must have a value property\");\n  }\n\n\n  const formatLabelColorWithDefault = (item) => formatLabelColor(item, defaultLabelColor);\n\n  const total = items.reduce((acc, item) => acc + item.value, 0);\n  return items\n    .map((item) => ({\n      ...item,\n      percentage: (item.value / total) * 100\n    }))\n    .map(formatLabel)\n    .map(formatColor)\n    .map(formatLabelColorWithDefault)\n    .map(formatSliceId)\n    .map(formatSlicePreviousId)\n    ;\n}\n\nexport function formatLabelColor(item, defaultLabelColor) {\n\n  return {\n    ...{ labelColor: defaultLabelColor },\n    ...item\n  };\n\n}\n\nexport function formatSliceId(item) {\n\n  const { value } = item;\n\n  const id = value + '' + getRandomSixDigitString();\n\n\n  return {\n    ...{ id: id },\n    ...item\n  };\n\n}\nexport function formatSlicePreviousId(item,  index, array) {\n  // console.log(index)\n  // console.log(array)\n\n  const previousItem = array[index - 1];\n  const { id: previousId } = previousItem || {id:null};\n\n\n  return {\n    ...{ previousId: previousId },\n    ...item\n  };\n\n}\n\n","import { createContainer, createElement } from \"../builder/elements\";\nimport { drawingCoordinatesBetweenInnerAndOuterCircle } from \"../draw/calculations\";\nimport { reverseString } from \"../shared/formatter\";\n\n\nfunction createTextDefinition(textId, innerAndOuterRadius, angles, point) {\n  const textPathDefinitionElement = createElement('defs', [])\n\n  const pathToDrawTextElement = createElement('path', [\n    ['id', textId],\n    ['stroke-width', '0']\n  ])\n  textPathDefinitionElement.appendChild(pathToDrawTextElement)\n  const drawingCoordinatesForText =\n    drawingCoordinatesBetweenInnerAndOuterCircle(\n      innerAndOuterRadius,\n      angles,\n      point\n    )\n  pathToDrawTextElement.setAttributeNS(null, 'd', drawingCoordinatesForText)\n  return textPathDefinitionElement\n}\n\nfunction createTextElement(textId, { label, labelSize, labelColor }) {\n  const textElement = createElement('text', [\n    ['font-size', labelSize + 'px'],\n    ['fill', labelColor],\n    ['rotate', '180']\n  ])\n  const textPathElement = createElement('textPath', [\n    ['href', '#' + textId],\n    ['text-anchor', 'middle'],\n    ['startOffset', '50%']\n  ])\n\n  // 180 degree reverses stuff\n  textPathElement.innerHTML = reverseString(label)\n  textElement.appendChild(textPathElement)\n  return textElement\n}\n\nexport function getTextElements(\n  id,\n  { label, labelSize, labelColor },\n  innerAndOuterRadius,\n  angles,\n  point\n) {\n  const textId = 'text' + id\n  const textPositionPathElement = createTextDefinition(\n    textId,\n    innerAndOuterRadius,\n    angles,\n    point\n  )\n  const textElement = createTextElement(textId, {\n    label,\n    labelSize,\n    labelColor\n  })\n\n  const container=createContainer();\n  container.appendChild(textPositionPathElement)\n  container.appendChild(textElement)\n  return  container;\n\n}\n","import { createElement } from \"../builder/elements\";\nimport { createArcForSlice } from \"../draw/arc\";\nimport { getTextElements } from \"../draw/textInArc\";\n\n\nexport function getSliceElement(\n  angles,\n  { label, value, color, labelColor },\n  point,\n  { innerRadius, outerRadius },\n  { labelSize },\n  { id, previousId }\n) {\n  const containerId = 'box' + id\n  const container = createElement('a', [\n    ['id', 'container' + containerId],\n    ['href', '#'],\n    ['style', 'text-decoration: none;']\n  ])\n\n  // <title>I'm a circle</title>\n  const titleElement = createElement('title', [])\n  titleElement.innerHTML = label\n  container.appendChild(titleElement)\n\n\n\n  const arc = createArcForSlice(point, angles, { innerRadius, outerRadius }, color, 0)\n\n\n  container.appendChild(arc);\n\n\n  const textContainer = getTextElements(\n    id,\n    { label, labelSize, labelColor },\n    { innerRadius, outerRadius },\n    angles,\n    point\n  )\n  container.appendChild(textContainer);\n\n  return container\n}\n","import { createCircle, createElement } from \"../builder/elements\";\nimport { createArcForSlice } from \"../draw/arc\";\n\nexport function createArcAnimation(strokeArray) {\n\n\n  const animateElement = createElement(\"animate\", [\n    [\"attributeType\", \"CSS\"],\n    [\"attributeName\", \"stroke-dashoffset\"],\n    [\"values\", \"0;\" + strokeArray],\n    [\"dur\", \"2s\"],\n    [\"fill\", \"freeze\"]\n  ]);\n  return animateElement;\n}\nexport function createOpacityAnimation() {\n\n\n\n  const animateElement = createElement(\"animate\", [\n    [\"attributeName\", \"opacity\"],\n    [\"from\", \"1\"],\n    [\"to\", \"0\"],\n    [\"dur\", \"2s\"],\n    [\"begin\", \".1s\"],\n    [\"fill\", \"freeze\"],\n    [\"repeatCount\", \"1\"]\n\n  ]);\n  return animateElement;\n}\n\n\nexport function getBorderAnimation({ x, y }, { innerRadius, outerRadius }, {\n  startAngle,\n  endAngle\n}, backgroundColor = \"white\") {\n  const strokeArray = 500;\n  const animatedMaskArc = createArcForSlice({ x, y }, { startAngle, endAngle }, {\n    innerRadius,\n    outerRadius: outerRadius + 10\n  }, backgroundColor, strokeArray);\n\n  animatedMaskArc.setAttribute(\"stroke-dashoffset\", \"0\");\n  const animateElement = createArcAnimation(strokeArray);\n\n  animatedMaskArc.appendChild(animateElement);\n  return animatedMaskArc;\n}\n\nexport function getCenterTitleAnimation({ x, y }, radius, backgroundColor = \"white\") {\n\n  const animatedMaskCircle = createCircle({ x, y }, radius, backgroundColor)\n\n  const animateElement = createOpacityAnimation();\n\n\n\n  animatedMaskCircle.appendChild(animateElement);\n  return animatedMaskCircle;\n}\n","export const thicknessWithRatio = {\n  XXL: 150,\n  XL: 125,\n  L: 100,\n  M: 50,\n  S: 35\n};\n\nexport const sizeWithAngles = {\n  XXL: [261, 460],\n  XL: [241, 480],\n  L: [221, 500],\n  M: [201, 520],\n  S: [181, 540]\n};\nexport const colors = [\n  \"#FF0000\",\n  \"#FF7F00\",\n  \"#FFFF00\",\n  \"#00FF00\",\n  \"#00FFFF\",\n  \"#0000FF\",\n  \"#8B00FF\"\n];\n\nexport const  chartStyles = `\n        a:hover .path-container {\n            opacity: 0.5;\n            transition: all ease 0.3s;\n        }\n        a .path-container {\n            opacity: 1.0;\n            transition: all ease 0.3s;\n        }\n\n`\n","import { createElement, insertStyles } from \"./builder/elements\";\nimport { getHtmlContainerElement } from \"./components/HtmlContainerElement\";\nimport { getSliceElement } from \"./components/SliceElement\";\nimport { formatItems } from \"./shared/formatter\";\nimport { getBorderAnimation, getCenterTitleAnimation } from \"./components/Animations\";\nimport { chartStyles, sizeWithAngles, thicknessWithRatio } from \"./shared/config\";\n\n\nexport function DoughnutElement(items, options) {\n  insertStyles(chartStyles);\n  const defaultOptions = {\n    radius: 100,\n    showAnimation: true,\n    title: \"\",\n    titleColor: \"#FF0000\",\n    thicknessSize: \"M\",\n    gapSize: \"XL\",\n    labelSize: 12,\n    labelColor: \"white\",\n    backgroundColor: \"white\",\n    imgUrl:\n      \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n  };\n\n  const formattedOptions = { ...defaultOptions, ...options };\n\n  const {\n    radius,\n    title,\n    thicknessSize,\n    showAnimation,\n    gapSize,\n    backgroundColor,\n    imgUrl,\n    titleColor,\n    labelSize,\n    labelColor\n  } = formattedOptions;\n  const thicknessOfCircle = thicknessWithRatio[thicknessSize];\n  const totalSize = (radius + thicknessOfCircle) * 2;\n  const x = totalSize / 2;\n  const y = totalSize / 2;\n  const outerRadius = radius + thicknessOfCircle;\n  const sizeWithAngle = sizeWithAngles[gapSize];\n  const [startAngle, endAngle] = sizeWithAngle;\n  const total = (endAngle - startAngle) / 100;\n  const percentageToDegree = (percent) => percent * total;\n\n  const container = createElement(\"g\", []);\n\n\n  let currentAngle = startAngle;\n\n  const formattedItems = formatItems(items, labelColor);\n\n\n  formattedItems.forEach((item, index) => {\n    const { label, value, color, percentage, id, previousId } = item;\n\n\n    const endAngle = currentAngle + percentageToDegree(percentage);\n\n    const currentBoxElement = getSliceElement(\n      { startAngle: currentAngle, endAngle },\n      item,\n      { x, y },\n      { innerRadius: radius, outerRadius: outerRadius },\n      { labelSize, labelColor },\n      { id, previousId }\n    );\n\n    container.appendChild(currentBoxElement);\n    currentAngle = endAngle;\n  });\n\n  const htmlContainerElement = getHtmlContainerElement(\n    { x, y },\n    radius,\n    imgUrl,\n    title,\n    titleColor\n  );\n\n\n  container.appendChild(htmlContainerElement);\n\n\n  if (showAnimation) {\n\n    const borderAnimation = getBorderAnimation({ x, y }, {\n      innerRadius: radius,\n      outerRadius: outerRadius\n    }, { startAngle, endAngle: currentAngle }, backgroundColor);\n    container.appendChild(borderAnimation);\n\n    const centerTitleAnimation = getCenterTitleAnimation({ x, y }, radius, backgroundColor);\n    container.appendChild(centerTitleAnimation);\n\n\n  }\n\n\n  const root = createElement(\"svg\", [\n    [\"width\", totalSize],\n    [\"height\", totalSize]\n  ]);\n  root.appendChild(container);\n\n  return root;\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { DoughnutElement } from \"./core/DoughnutElement\";\n\nexport const CroppedDoughnutChart = ({ items,options }) => {\n\n\n  const svg = useRef(null);\n\n\n  useEffect(() => {\n\n\n\n\n    const result= DoughnutElement(items,options )\n\n    if(svg.current){\n      svg.current.appendChild(result)\n    }\n\n\n  }, [])\n\n  // return   <div dangerouslySetInnerHTML={{ __html: state }} />\n  return   <div ref={svg}/>\n\n\n}\n"],"names":["SVG_NAMESPACE","createElement","name","attribs","xmlns","svgElem","document","createElementNS","forEach","value","setAttributeNS","createHtmlElement","element","setAttribute","insertStyles","styles","head","querySelector","styleSheet","innerHTML","appendChild","createContainer","container","createCircle","radius","defaultcolor","x","y","PADDING_RATIO","getHtmlContainerElement","imgUrl","title","textColor","mainElement","paddedRadius","imgElement","breakElement","paddedX","paddedY","width","height","foreignObject","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","Math","PI","cos","sin","drawingCoordinatesBetweenInnerAndOuterCircle","innerRadius","outerRadius","startAngle","endAngle","middleRadius","drawingCoordinatesForText","drawingCoordinatesForTextPosition","startPoint","endPoint","arcSweep","d","join","coordinatesForArc","createArc","containerAttributes","point","angles","innerArc","innerArcData","createArcForSlice","color","strokeArray","borderWidth","strokeData","arc","getRandomSixDigitString","str","floor","random","padStart","colors","formatLabel","item","label","formatColor","index","formatToArrayOfObjects","inputItems","isNumber","currentValue","isAllNumbers","every","items","map","reverseString","split","reverse","formatItems","defaultLabelColor","hasValueProperty","isAllValid","Error","formatLabelColorWithDefault","formatLabelColor","total","reduce","acc","percentage","formatSliceId","formatSlicePreviousId","labelColor","id","array","previousItem","previousId","createTextDefinition","textId","innerAndOuterRadius","textPathDefinitionElement","pathToDrawTextElement","createTextElement","labelSize","textElement","textPathElement","getTextElements","textPositionPathElement","getSliceElement","containerId","titleElement","textContainer","createArcAnimation","animateElement","createOpacityAnimation","getBorderAnimation","backgroundColor","animatedMaskArc","getCenterTitleAnimation","animatedMaskCircle","thicknessWithRatio","XXL","XL","L","M","S","sizeWithAngles","chartStyles","DoughnutElement","options","defaultOptions","showAnimation","titleColor","thicknessSize","gapSize","formattedOptions","thicknessOfCircle","totalSize","sizeWithAngle","percentageToDegree","percent","currentAngle","formattedItems","currentBoxElement","htmlContainerElement","borderAnimation","centerTitleAnimation","root","CroppedDoughnutChart","svg","useRef","useEffect","result","current","React"],"mappings":"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"}