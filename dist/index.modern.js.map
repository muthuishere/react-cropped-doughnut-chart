{"version":3,"file":"index.modern.js","sources":["../src/core/builder/elements.js","../src/core/shared/randomizer.js","../src/core/shared/formatter.js","../src/core/draw/calculations.js","../src/core/draw/arc.js","../src/core/components/Animator.js","../src/core/shared/config.js","../src/core/draw/textInArc.js","../src/core/components/Slice.js","../src/core/components/TitleContainer.js","../src/core/HorseShoeChartCreator.js","../src/index.js"],"sourcesContent":["\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg'\nexport function createElement(name, attribs) {\n  const xmlns = SVG_NAMESPACE\n  const svgElem = document.createElementNS(xmlns, name)\n\n  attribs.forEach(([name, value]) => svgElem.setAttributeNS(null, name, value))\n\n  return svgElem\n}\n\nexport function createHtmlElement(name, attribs) {\n  const element = document.createElement(name)\n\n  attribs.forEach(([name, value]) => element.setAttribute(name, value))\n\n  return element\n}\n\n\nexport function setAttributeForSvg(element, name, value) {\n  element.setAttributeNS(null, name, value)\n}\n\n\n\nexport function insertStyles(styles) {\n  if(document.head.querySelector(\"#doughnut-cropped-chart-styles\")) {\n    return\n  }\n  var styleSheet = document.createElement('style')\n  styleSheet.setAttribute('type', 'text/css')\n  styleSheet.setAttribute('id', 'doughnut-cropped-chart-styles')\n\n  styleSheet.innerHTML = styles\n  document.head.appendChild(styleSheet)\n}\n\nexport function createContainer(){\n  const container = createElement('g', [])\n  return container;\n}\nexport function createCircle({ x, y }, radius, defaultcolor) {\n  return createElement('circle', [\n    ['cx', x],\n    ['cy', y],\n    ['r', radius],\n    ['fill', defaultcolor]\n  ])\n}\n\nexport function createDefinitionBlock() {\n  return createElement(\"defs\", []);\n}\n\nexport function createGroupElement() {\n  return createElement(\"g\", []);\n}\n\nexport function createSVGRoot(totalSize) {\n  return createElement(\"svg\", [\n    [\"width\", totalSize],\n    [\"height\", totalSize]\n  ]);\n}\n\nexport function createTitle(label) {\n  const titleElement = createElement(\"title\", []);\n  titleElement.innerHTML = label;\n  return titleElement;\n}\n","export function getRandomSixDigitString() {\n  const str = \"\" + Math.floor(Math.random() * (999999 - 1)) + 1;\n  return str.padStart(6, \"0\");\n}\n","import { getRandomSixDigitString } from \"./randomizer\";\n\nconst colors = [\n  \"#FF0000\",\n  \"#FF7F00\",\n  \"#FFFF00\",\n  \"#00FF00\",\n  \"#00FFFF\",\n  \"#0000FF\",\n  \"#8B00FF\"\n];\n\nfunction formatLabel(item) {\n  const { label } = item;\n  if (label) return item;\n  else\n    return {\n      ...item,\n      label: `${item.value}`\n    };\n}\n\nfunction formatColor(item, index) {\n  const { color } = item;\n  if (color) return item;\n  else\n    return {\n      ...item,\n      color: colors[index]\n    };\n}\n\nexport function formatToArrayOfObjects(inputItems) {\n  const isNumber = (currentValue) => typeof currentValue === \"number\";\n  const isAllNumbers = inputItems.every(isNumber);\n  let items = inputItems;\n  if (isAllNumbers) {\n    items = inputItems.map((item) => ({ value: item }));\n  }\n  return items;\n}\n\nexport function reverseString(str) {\n  return str.split(\"\").reverse().join(\"\");\n}\n\nexport function formatItems(inputItems, defaultLabelColor) {\n  const items = formatToArrayOfObjects(inputItems);\n\n  const hasValueProperty = (currentValue) => null != currentValue.value;\n  const isAllValid = items.every(hasValueProperty);\n  if (!isAllValid) {\n    throw new Error(\"Invalid Data Found, All items must have a value property\");\n  }\n\n\n  const formatLabelColorWithDefault = (item) => formatLabelColor(item, defaultLabelColor);\n\n  const total = items.reduce((acc, item) => acc + item.value, 0);\n  return items\n    .map((item) => ({\n      ...item,\n      percentage: (item.value / total) * 100\n    }))\n    .map(formatLabel)\n    .map(formatColor)\n    .map(formatLabelColorWithDefault)\n    .map(formatSliceId)\n    .map(formatSlicePreviousId)\n    ;\n}\n\nexport function formatLabelColor(item, defaultLabelColor) {\n\n  return {\n    ...{ labelColor: defaultLabelColor },\n    ...item\n  };\n\n}\n\nexport function formatSliceId(item) {\n\n  const { value } = item;\n\n  const id = value + '' + getRandomSixDigitString();\n\n\n  return {\n    ...{ id: id },\n    ...item\n  };\n\n}\nexport function formatSlicePreviousId(item,  index, array) {\n  // console.log(index)\n  // console.log(array)\n\n  const previousItem = array[index - 1];\n  const { id: previousId } = previousItem || {id:null};\n\n\n  return {\n    ...{ previousId: previousId },\n    ...item\n  };\n\n}\n\n","/**\r\n * Convert a polar coordinate (r,theta) to cartesian (x,y). The calculations are x=r*cos(theta) and y=r*sin(theta).\r\n * This Method is used in the DoughnutChart. to calculate the x,y position from center of a sliceElement.\r\n * Usually in Math the origin is Zero, Since the center of the doughnut is the origin, the centerX and centerY are added to the result.\r\n * @param centerX - Center of Circle X\r\n * @param centerY - Center of Circle Y\r\n * @param radius  - Radius of Circle\r\n * @param angleInDegrees - Angle in Degrees\r\n * @returns {{x: *, y: *}}\r\n */\r\nexport function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\r\n\r\n  var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\r\n\r\n  return {\r\n    x: centerX + radius * Math.cos(angleInRadians),\r\n    y: centerY + radius * Math.sin(angleInRadians)\r\n  }\r\n}\r\n\r\n\r\nexport function drawingCoordinatesBetweenInnerAndOuterCircle(\r\n  { innerRadius, outerRadius },\r\n  { startAngle, endAngle },\r\n  { x, y }\r\n) {\r\n  const middleRadius = innerRadius + (outerRadius - innerRadius) / 2 -20\r\n\r\n  const drawingCoordinatesForText = drawingCoordinatesForTextPosition(\r\n    { x, y },\r\n    {\r\n      startAngle,\r\n      endAngle: endAngle\r\n    },\r\n    middleRadius\r\n  )\r\n  return drawingCoordinatesForText\r\n}\r\n\r\n\r\nexport function drawingCoordinatesForTextPosition(\r\n  { x, y },\r\n  { startAngle, endAngle },\r\n  radius\r\n) {\r\n  const startPoint = polarToCartesian(x, y, radius, startAngle)\r\n  const endPoint = polarToCartesian(x, y, radius, endAngle)\r\n\r\n  const arcSweep = endAngle - startAngle <= 180 ? '0' : '1'\r\n\r\n  const d = [\r\n    'M',    endPoint.x,    endPoint.y,\r\n    'A',    radius,    radius,    0,    arcSweep,    0,    startPoint.x,    startPoint.y\r\n\r\n  ].join(' ')\r\n\r\n  return d\r\n}\r\n","import { polarToCartesian } from \"./calculations\";\nimport { createElement } from \"../builder/elements\";\n\n/**\n * Get Drawing Coordinates for an Arc , The arc is a fully closed area in a circle\n *  The arc is drawn from the startAngle to the endAngle\n * The arc is drawn in the clockwise direction\n * @param x - Center of Circle X\n * @param y - Center of Circle Y\n * @param startAngle - Start Angle in Degrees\n * @param endAngle - End Angle in Degrees\n * @param radius - Radius of Circle\n */\nexport function coordinatesForArc(\n  { x, y },\n  { startAngle, endAngle },\n  radius\n) {\n  const startPoint = polarToCartesian(x, y, radius, startAngle);\n  const endPoint = polarToCartesian(x, y, radius, endAngle);\n\n  const arcSweep = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n\n  const d = [\n    \"M\", endPoint.x, endPoint.y,\n    \"A\", radius, radius, 0, arcSweep, 0, startPoint.x, startPoint.y\n  ].join(\" \");\n\n  return d;\n}\n\n\nexport function createArc(containerAttributes, point, angles, radius) {\n  const innerArc = createElement(\"path\", containerAttributes);\n  const innerArcData = coordinatesForArc(point, angles, radius);\n  innerArc.setAttributeNS(null, \"d\", innerArcData);\n  return innerArc;\n}\n\nexport function createArcForSlice(\n  point,\n  angles,\n  { outerRadius, innerRadius },\n  color\n  , strokeArray) {\n  const borderWidth = outerRadius - innerRadius;\n\n  const strokeData = strokeArray * -1;\n  const containerAttributes = [\n    [\"fill\", \"none\"],\n    [\"stroke\", color],\n    [\"stroke-width\", borderWidth],\n    [\"stroke-dashoffset\", \"\" + strokeData],\n    [\"stroke-dasharray\", \"\" + strokeArray],\n    [\"class\", \"path-container\"]\n  ];\n\n  return createArc(containerAttributes, point, angles, innerRadius);\n}\n","import { createCircle, createDefinitionBlock, createElement } from \"../builder/elements\";\nimport { createArcForSlice } from \"../draw/arc\";\n\nexport function createArcAnimation(strokeArray, duration = \"2s\") {\n\n\n  const animateElement = createElement(\"animate\", [\n    [\"attributeType\", \"CSS\"],\n    [\"attributeName\", \"stroke-dashoffset\"],\n    [\"values\", \"0;\" + strokeArray],\n    [\"dur\", duration],\n    [\"fill\", \"freeze\"]\n  ]);\n  return animateElement;\n}\n\nexport function createOpacityAnimation(duration) {\n\n\n  const animateElement = createElement(\"animate\", [\n    [\"attributeName\", \"opacity\"],\n    [\"from\", \"1\"],\n    [\"to\", \"0\"],\n    [\"dur\", duration],\n    [\"begin\", \".5s\"],\n    [\"fill\", \"freeze\"],\n    [\"repeatCount\", \"1\"]\n\n  ]);\n  return animateElement;\n}\n\n\nexport function getBorderAnimation({ x, y }, { innerRadius, outerRadius }, {\n                                     startAngle,\n                                     endAngle\n                                   }, backgroundColor,\n                                   animationDurationInSeconds) {\n  const strokeArray = 900;\n  let adjustedAngle = 20;\n  const animatedMaskArc = createArcForSlice({ x, y }, { startAngle:startAngle- adjustedAngle, endAngle:endAngle+adjustedAngle }, {\n    innerRadius,\n    outerRadius: outerRadius + 10\n  }, backgroundColor, strokeArray);\n\n  animatedMaskArc.setAttribute(\"stroke-dashoffset\", \"0\");\n  const animateElement = createArcAnimation(strokeArray, animationDurationInSeconds + \"s\");\n\n  animatedMaskArc.appendChild(animateElement);\n  return animatedMaskArc;\n}\n\nexport function getCenterTitleAnimation({ x, y }, radius, backgroundColor, animationDurationInSeconds) {\n\n  const animatedMaskCircle = createCircle({ x, y }, radius, backgroundColor);\n  const duration = (animationDurationInSeconds + 1) + \"s\";\n  const animateElement = createOpacityAnimation(duration);\n\n\n  animatedMaskCircle.appendChild(animateElement);\n\n  return animatedMaskCircle;\n}\n\n/**\n * Based on W3 Spec\n *  <defs>\n *     <filter id=\"MyFilter\" filterUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n *      <desc>Produces a 3D lighting effect.</desc>\n *   <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"4\" result=\"blur\"/>\n *   <feOffset in=\"blur\" dx=\"4\" dy=\"4\" result=\"offsetBlur\"/>\n *   <feSpecularLighting in=\"blur\" surfaceScale=\"5\" specularConstant=\".5\"\n *                       specularExponent=\"20\" lighting-color=\"#bbbbbb\"\n *                       result=\"specOut\">\n *     <fePointLight x=\"-5000\" y=\"-10000\" z=\"20000\"/>\n *   </feSpecularLighting>\n *   <feComposite in=\"specOut\" in2=\"SourceAlpha\" operator=\"in\" result=\"specOut\"/>\n *   <feComposite in=\"SourceGraphic\" in2=\"specOut\" operator=\"arithmetic\"\n *                k1=\"0\" k2=\"1\" k3=\"1\" k4=\"0\" result=\"litPaint\"/>\n *\n *\n *     </filter>\n *   </defs>\n *\n */\n\n\nexport function createHoverFilter() {\n\n  const filter = createElement(\"filter\", [\n    [\"id\", \"glowfilter\"],\n    [\"filterUnits\", \"userSpaceOnUse\"],\n    [\"x\", \"0\"],\n    [\"y\", \"0\"],\n    [\"width\", \"100%\"],\n    [\"height\", \"100%\"]]);\n\n  const desc = createElement(\"desc\", [], \"Produces a 3D lighting effect.\");\n  filter.appendChild(desc);\n\n  //<feMorphology operator=\"dilate\" radius=\"2\"/>\n  const fegaussianBlur = createElement(\"feMorphology\", [\n    [\"operator\", \"dilate\"], [\"radius\", \"2\"]\n  ]);\n  filter.appendChild(fegaussianBlur);\n\n  const defs = createDefinitionBlock();\n  defs.appendChild(filter);\n  return defs;\n}\n\n\nexport function create3deffect() {\n\n  const filter = createElement(\"filter\", [\n    [\"id\", \"glowfilter\"],\n    [\"filterUnits\", \"userSpaceOnUse\"],\n    [\"x\", \"0\"],\n    [\"y\", \"0\"],\n    [\"width\", \"100%\"],\n    [\"height\", \"100%\"]]);\n\n  const desc = createElement(\"desc\", [], \"Produces a 3D lighting effect.\");\n  filter.appendChild(desc);\n  const fegaussianBlur = createElement(\"feGaussianBlur\", [\n    [\"in\", \"SourceAlpha\"],\n    [\"stdDeviation\", \"4\"],\n    [\"result\", \"blur\"]\n  ]);\n  filter.appendChild(fegaussianBlur);\n  const feOffset = createElement(\"feOffset\", [\n    [\"in\", \"blur\"],\n    [\"dx\", \"4\"],\n    [\"dy\", \"4\"],\n    [\"result\", \"offsetBlur\"]\n  ]);\n  filter.appendChild(feOffset);\n  const fepointLight = createElement(\"fePointLight\", [\n    [\"x\", \"-5000\"],\n    [\"y\", \"-10000\"],\n    [\"z\", \"20000\"]\n  ]);\n  const feSpecularLighting = createElement(\"feSpecularLighting\", [\n    [\"in\", \"blur\"],\n    [\"surfaceScale\", \"5\"],\n    [\"specularConstant\", \".5\"],\n    [\"specularExponent\", \"20\"],\n    [\"lighting-color\", \"#bbbbbb\"],\n    [\"result\", \"specOut\"]\n  ]);\n  feSpecularLighting.appendChild(fepointLight);\n  filter.appendChild(feSpecularLighting);\n  const feCompositeSpecOut = createElement(\"feComposite\", [\n    [\"in\", \"specOut\"],\n    [\"in2\", \"SourceAlpha\"],\n    [\"operator\", \"in\"],\n    [\"result\", \"specOut\"]\n  ]);\n  filter.appendChild(feCompositeSpecOut);\n  const feCompositeSourceGraphic = createElement(\"feComposite\", [\n    [\"in\", \"SourceGraphic\"],\n    [\"in2\", \"specOut\"],\n    [\"operator\", \"arithmetic\"],\n    [\"k1\", \"0\"],\n    [\"k2\", \"1\"],\n    [\"k3\", \"1\"],\n    [\"k4\", \"0\"],\n    [\"result\", \"litPaint\"]\n  ]);\n  filter.appendChild(feCompositeSourceGraphic);\n  const defs = createDefinitionBlock();\n  defs.appendChild(filter);\n  return defs;\n}\n","export const thicknessWithRatio = {\n  XXL: 150,\n  XL: 125,\n  L: 100,\n  M: 50,\n  S: 35\n};\n\nexport const sizeWithAngles = {\n  XXL: [261, 460],\n  XL: [241, 480],\n  L: [221, 500],\n  M: [201, 520],\n  S: [181, 540]\n};\nexport const colors = [\n  \"#FF0000\",\n  \"#FF7F00\",\n  \"#FFFF00\",\n  \"#00FF00\",\n  \"#00FFFF\",\n  \"#0000FF\",\n  \"#8B00FF\"\n];\n\n\nexport const  chartStyles = `\n\n\n.description {\n  pointer-events: none;\n  position: absolute;\n  font-size: 18px;\n  text-align: center;\n  background: white;\n  padding: 10px 15px;\n  z-index: 5;\n  height: 30px;\n  line-height: 30px;\n  margin: 0 auto;\n  color: #21669e;\n  border-radius: 5px;\n  box-shadow: 0 0 0 1px #eee;\n  -moz-transform: translateX(-50%);\n  -ms-transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  display: none;\n}\n.description.active {\n  display: block;\n}\n.description:after {\n  content: \"\";\n  position: absolute;\n  left: 50%;\n  top: 100%;\n  width: 0;\n  height: 0;\n  margin-left: -10px;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-top: 10px solid white;\n}\n\n\n.horse-chart-tooltip::after {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    margin-left: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: cornsilk transparent transparent transparent;\n}\n.tooltip-animation-on\n{\n    display: block;\n\n    -webkit-animation: fadeInFromNone 0.5s ease-out;\n    -moz-animation: fadeInFromNone 0.5s ease-out;\n    -o-animation: fadeInFromNone 0.5s ease-out;\n    animation: fadeInFromNone 0.5s ease-out;\n}\n@keyframes fadeInFromNone {\n    0% {\n        display: none;\n        opacity: 0;\n    }\n\n    1% {\n        display: block;\n        opacity: 0;\n    }\n\n    100% {\n        display: block;\n        opacity: 1;\n    }\n}\n.tooltip-animation-off\n{\n    display: block;\n\n    -webkit-animation: fadeOutFromNone 0.5s ease-out;\n    -moz-animation: fadeOutFromNone 0.5s ease-out;\n    -o-animation: fadeOutFromNone 0.5s ease-out;\n    animation: fadeOutFromNone 0.5s ease-out;\n}\n@keyframes fadeOutFromNone {\n    0% {\n        display: block;\n        opacity: 1;\n    }\n\n    1% {\n        display: block;\n        opacity: 0;\n    }\n\n    100% {\n        display: none;\n        opacity: 1;\n    }\n}\n\n  a:hover .path-container {\n    cursor: pointer;\n    transition: all 0.5s ease;\n   filter:url(#glowfilter) brightness(1.0);\n  }\n\n  a:hover text {\n    transition: all 0.5s ease;\n    cursor: pointer;\n    font-weight: bold;\n  }\n  a text {\n    transition: all 0.5s ease;\n    filter: ;\n    cursor: pointer;\n  }\n    a .path-container {\n\n      transition: all 0.5s ease;\n      filter: brightness(0.7);\n    }\n\n  foreignObject {\n    cursor: pointer;\n  }\n\n`\n","import { createContainer, createElement } from \"../builder/elements\";\nimport { drawingCoordinatesBetweenInnerAndOuterCircle } from \"../draw/calculations\";\nimport { reverseString } from \"../shared/formatter\";\n\n\nfunction createTextDefinition(textId, innerAndOuterRadius, angles, point) {\n  const textPathDefinitionElement = createElement('defs', [])\n\n  const pathToDrawTextElement = createElement('path', [\n    ['id', textId],\n    ['stroke-width', '0']\n  ])\n  textPathDefinitionElement.appendChild(pathToDrawTextElement)\n  const drawingCoordinatesForText =\n    drawingCoordinatesBetweenInnerAndOuterCircle(\n      innerAndOuterRadius,\n      angles,\n      point\n    )\n  pathToDrawTextElement.setAttributeNS(null, 'd', drawingCoordinatesForText)\n  return textPathDefinitionElement\n}\n\nfunction createTextElement(textId, { label, labelSize, labelColor }) {\n  const textElement = createElement('text', [\n    ['font-size', labelSize + 'px'],\n    ['fill', labelColor],\n    ['rotate', '180']\n  ])\n  const textPathElement = createElement('textPath', [\n    ['href', '#' + textId],\n    ['text-anchor', 'middle'],\n    ['startOffset', '50%']\n  ])\n\n  // 180 degree reverses stuff\n  textPathElement.innerHTML = reverseString(label)\n  textElement.appendChild(textPathElement)\n  return textElement\n}\n\nexport function getTextElements(\n  id,\n  { label, labelSize, labelColor },\n  innerAndOuterRadius,\n  angles,\n  point\n) {\n  const textId = 'text' + id\n  const textPositionPathElement = createTextDefinition(\n    textId,\n    innerAndOuterRadius,\n    angles,\n    point\n  )\n  const textElement = createTextElement(textId, {\n    label,\n    labelSize,\n    labelColor\n  })\n\n  const container=createContainer();\n  container.appendChild(textPositionPathElement)\n  container.appendChild(textElement)\n  return  container;\n\n}\n","import { createElement, createTitle } from \"../builder/elements\";\nimport { createArcForSlice } from \"../draw/arc\";\nimport { getTextElements } from \"../draw/textInArc\";\nimport { setupToolTips } from \"./Tooltip\";\n\n\nexport function getSliceElement(\n  angles,\n  { label, value, color, labelColor },\n  point,\n  { innerRadius, outerRadius },\n  { labelSize },\n  { id, previousId }\n) {\n\n\n\n\n  const containerId = 'box' + id\n  let sliceAttributes = [\n    ['id', 'container' + containerId],\n    ['class', 'slice-container'],\n    ['style', 'text-decoration: none;']\n  ];\n\n\n  const container = createElement('a', sliceAttributes)\n\n  container.appendChild(createTitle(label))\n  //setupToolTips(label, container);\n\n\n  const arc = createArcForSlice(point, angles, { innerRadius, outerRadius }, color, 0)\n\n\n  container.appendChild(arc);\n\n\n  const textContainer = getTextElements(\n    id,\n    { label, labelSize, labelColor },\n    { innerRadius, outerRadius },\n    angles,\n    point\n  )\n  container.appendChild(textContainer);\n\n  return container\n}\n","import { createElement, createHtmlElement } from '../builder/elements'\n\nexport const PADDING_RATIO = 0.8\nexport function getTitleContainer({ x, y }, radius, imgUrl, title, textColor) {\n  // let {x,y} = polarToCartesian(centerX, centerY, radius, 90);\n\n  const mainElement = createHtmlElement('div', [\n    [\n      'style',\n      'display: table-cell; text-align: center; vertical-align: middle;color:' +\n        textColor +\n        ';'\n    ]\n  ])\n  const paddedRadius = radius * PADDING_RATIO\n\n  const imgElement = createHtmlElement('img', [\n    ['src', imgUrl],\n    ['width', paddedRadius],\n    ['height', paddedRadius]\n  ])\n  const breakElement = createHtmlElement('br', [])\n  mainElement.appendChild(imgElement)\n  mainElement.appendChild(breakElement)\n  mainElement.innerHTML += title\n\n  const container = createHtmlElement('div', [\n    ['style', 'display: table; font-size: 24px; width: 100%; height: 100%;']\n  ])\n  container.appendChild(mainElement)\n\n  const paddedX = x - paddedRadius\n  const paddedY = y - paddedRadius\n  // y = centerY + radius;\n  const width = paddedRadius * 2\n  const height = paddedRadius * 2\n  //  <foreignObject x=\"20\" y=\"20\" width=\"160\" height=\"160\">\n  const foreignObject = createElement('foreignObject', [\n    ['x', paddedX],\n    ['y', paddedY],\n    ['width', width],\n    ['height', height]\n  ])\n\n  foreignObject.appendChild(container)\n\n  return foreignObject\n}\n","import { createElement, createGroupElement, createSVGRoot } from \"./builder/elements\";\n\nimport { formatItems } from \"./shared/formatter\";\nimport { createHoverFilter, getBorderAnimation, getCenterTitleAnimation } from \"./components/Animator\";\nimport { chartStyles, sizeWithAngles, thicknessWithRatio } from \"./shared/config\";\nimport { getSliceElement } from \"./components/Slice\";\nimport { getTitleContainer } from \"./components/TitleContainer\";\n\n\nfunction getPoint(totalSize){\n\n  const x = totalSize / 2;\n  const y = totalSize / 2;\n  return {x, y };\n}\n\nfunction getChartStyleElement() {\n  const styleElement = createElement(\"style\", []);\n  styleElement.innerHTML = chartStyles;\n  return styleElement;\n}\n\nexport function HorseShoeChartCreator(items, options) {\n  // insertStyles(chartStyles);\n  const defaultOptions = {\n    radius: 100,\n    showAnimation: true,\n    animationDurationInSeconds:2,\n    title: \"\",\n    titleColor: \"#FF0000\",\n    thicknessSize: \"M\",\n    gapSize: \"XL\",\n    labelSize: 12,\n    labelColor: \"white\",\n    backgroundColor: \"white\",\n    imgUrl:\n      \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n  };\n\n  const formattedOptions = { ...defaultOptions, ...options };\n\n  const {\n    radius,\n    title,\n    showGlow,\n    thicknessSize,\n    showAnimation,\n    animationDurationInSeconds,\n    gapSize,\n    backgroundColor,\n    imgUrl,\n    titleColor,\n    labelSize,\n    labelColor\n  } = formattedOptions;\n  const thicknessOfCircle = thicknessWithRatio[thicknessSize];\n  const totalSize = (radius + thicknessOfCircle) * 2;\n\n  const {x,y} = getPoint(totalSize);\n\n  const outerRadius = radius + thicknessOfCircle;\n  const sizeWithAngle = sizeWithAngles[gapSize];\n  const [startAngle, endAngle] = sizeWithAngle;\n  const total = (endAngle - startAngle) / 100;\n  const percentageToDegree = (percent) => percent * total;\n\n  const container = createGroupElement();\n\n\n  const centerTitleContainer = getTitleContainer(\n    { x, y },\n    radius,\n    imgUrl,\n    title,\n    titleColor\n  );\n\n\n  container.appendChild(centerTitleContainer);\n\n  let currentAngle = startAngle;\n\n  const formattedItems = formatItems(items, labelColor);\n\n\n\n  const filterElement=createHoverFilter()\n  container.appendChild(filterElement)\n\n\n\n\n  formattedItems.forEach((item, index) => {\n    const {  percentage, id, previousId } = item;\n    const endAngle = currentAngle + percentageToDegree(percentage);\n\n\n    const currentBoxElement = getSliceElement({ startAngle: currentAngle, endAngle }, item, {\n      x,\n      y\n    }, { innerRadius: radius, outerRadius: outerRadius }, { labelSize, labelColor }, { id, previousId });\n\n    container.appendChild(currentBoxElement);\n    currentAngle = endAngle;\n  });\n\n\n\n\n  if (showAnimation) {\n\n\n    const borderAnimation = getBorderAnimation({ x, y }, {\n      innerRadius: radius,\n      outerRadius: outerRadius\n    }, { startAngle, endAngle: currentAngle }, backgroundColor,animationDurationInSeconds);\n    container.appendChild(borderAnimation);\n\n\n    const centerTitleAnimation = getCenterTitleAnimation({ x, y }, radius, backgroundColor,animationDurationInSeconds);\n    container.appendChild(centerTitleAnimation);\n    centerTitleAnimation.querySelector(\"animate\").onend = () => {\n\n      container.removeChild(centerTitleAnimation);\n      container.removeChild(borderAnimation);\n    }\n\n  }\n\n\n  const root = createSVGRoot(totalSize);\n  const styleElement = getChartStyleElement();\n  root.appendChild(styleElement);\n  root.appendChild(container);\n\n  return root;\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { HorseShoeChartCreator } from \"./core/HorseShoeChartCreator\";\n\nexport const HorseShoeChart = ({ items,options }) => {\n\n\n  const svg = useRef(null);\n\n\n  useEffect(() => {\n\n\n    const result= HorseShoeChartCreator(items,options )\n\n    if(svg.current){\n\n      svg.current.appendChild(result)\n    }\n\n\n  }, [])\n\n  // return   <div dangerouslySetInnerHTML={{ __html: state }} />\n  return   <div ref={svg}/>\n\n\n}\n"],"names":["SVG_NAMESPACE","createElement","name","attribs","xmlns","svgElem","document","createElementNS","forEach","value","setAttributeNS","createHtmlElement","element","setAttribute","createContainer","container","createCircle","x","y","radius","defaultcolor","createDefinitionBlock","createGroupElement","createSVGRoot","totalSize","createTitle","label","titleElement","innerHTML","getRandomSixDigitString","str","Math","floor","random","padStart","colors","formatLabel","item","formatColor","index","color","formatToArrayOfObjects","inputItems","isNumber","currentValue","isAllNumbers","every","items","map","reverseString","split","reverse","join","formatItems","defaultLabelColor","hasValueProperty","isAllValid","Error","formatLabelColorWithDefault","formatLabelColor","total","reduce","acc","percentage","formatSliceId","formatSlicePreviousId","labelColor","id","array","previousItem","previousId","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","PI","cos","sin","drawingCoordinatesBetweenInnerAndOuterCircle","innerRadius","outerRadius","startAngle","endAngle","middleRadius","drawingCoordinatesForText","drawingCoordinatesForTextPosition","startPoint","endPoint","arcSweep","d","coordinatesForArc","createArc","containerAttributes","point","angles","innerArc","innerArcData","createArcForSlice","strokeArray","borderWidth","strokeData","createArcAnimation","duration","animateElement","createOpacityAnimation","getBorderAnimation","backgroundColor","animationDurationInSeconds","adjustedAngle","animatedMaskArc","appendChild","getCenterTitleAnimation","animatedMaskCircle","createHoverFilter","filter","desc","fegaussianBlur","defs","thicknessWithRatio","XXL","XL","L","M","S","sizeWithAngles","chartStyles","createTextDefinition","textId","innerAndOuterRadius","textPathDefinitionElement","pathToDrawTextElement","createTextElement","labelSize","textElement","textPathElement","getTextElements","textPositionPathElement","getSliceElement","containerId","sliceAttributes","arc","textContainer","PADDING_RATIO","getTitleContainer","imgUrl","title","textColor","mainElement","paddedRadius","imgElement","breakElement","paddedX","paddedY","width","height","foreignObject","getPoint","getChartStyleElement","styleElement","HorseShoeChartCreator","options","defaultOptions","showAnimation","titleColor","thicknessSize","gapSize","formattedOptions","showGlow","thicknessOfCircle","sizeWithAngle","percentageToDegree","percent","centerTitleContainer","currentAngle","formattedItems","filterElement","currentBoxElement","borderAnimation","centerTitleAnimation","querySelector","onend","removeChild","root","HorseShoeChart","svg","useRef","useEffect","result","current"],"mappings":"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AAE,CAAC,GAAD,EAAM,GAAN;AALyB,CAAvB;AAOP,AAWO,MAAOE,WAAW,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/HO;;ACrBP,SAASC,oBAAT,CAA8BC,MAA9B,EAAsCC,mBAAtC,EAA2DlC,MAA3D,EAAmED,KAAnE,EAA0E;AACxE,QAAMoC,yBAAyB,GAAGjI,aAAa,CAAC,MAAD,EAAS,EAAT,CAA/C;AAEA,QAAMkI,qBAAqB,GAAGlI,aAAa,CAAC,MAAD,EAAS,CAClD,CAAC,IAAD,EAAO+H,MAAP,CADkD,EAElD,CAAC,cAAD,EAAiB,GAAjB,CAFkD,CAAT,CAA3C;AAIAE,EAAAA,yBAAyB,CAACnB,WAA1B,CAAsCoB,qBAAtC;AACA,QAAM9C,yBAAyB,GAC7BN,4CAA4C,CAC1CkD,mBAD0C,EAE1ClC,MAF0C,EAG1CD,KAH0C,CAD9C;AAMAqC,EAAAA,qBAAqB,CAACzH,cAAtB,CAAqC,IAArC,EAA2C,GAA3C,EAAgD2E,yBAAhD;AACA,SAAO6C,yBAAP;AACD;;AAED,SAASE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"}