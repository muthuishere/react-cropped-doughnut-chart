{"version":3,"file":"index.modern.js","sources":["../src/core/builder/elements.js","../src/core/shared/randomizer.js","../src/core/shared/formatter.js","../src/core/draw/calculations.js","../src/core/draw/arc.js","../src/core/components/Animator.js","../src/core/shared/config.js","../src/core/draw/textInArc.js","../src/core/components/Slice.js","../src/core/components/TitleContainer.js","../src/core/HorseShoeChartCreator.js","../src/index.js"],"sourcesContent":["export const SVG_NAMESPACE = 'http://www.w3.org/2000/svg'\r\nexport function createElement(name, attribs) {\r\n  const xmlns = SVG_NAMESPACE\r\n  const svgElem = document.createElementNS(xmlns, name)\r\n\r\n  attribs.forEach(([name, value]) => svgElem.setAttributeNS(null, name, value))\r\n\r\n  return svgElem\r\n}\r\n\r\nexport function createHtmlElement(name, attribs) {\r\n  const element = document.createElement(name)\r\n\r\n  attribs.forEach(([name, value]) => element.setAttribute(name, value))\r\n\r\n  return element\r\n}\r\n\r\nexport function setAttributeForSvg(element, name, value) {\r\n  element.setAttributeNS(null, name, value)\r\n}\r\n\r\nexport function insertStyles(styles) {\r\n  if (document.head.querySelector('#doughnut-cropped-chart-styles')) {\r\n    return\r\n  }\r\n  var styleSheet = document.createElement('style')\r\n  styleSheet.setAttribute('type', 'text/css')\r\n  styleSheet.setAttribute('id', 'doughnut-cropped-chart-styles')\r\n\r\n  styleSheet.innerHTML = styles\r\n  document.head.appendChild(styleSheet)\r\n}\r\n\r\nexport function createContainer() {\r\n  const container = createElement('g', [])\r\n  return container\r\n}\r\nexport function createCircle({ x, y }, radius, defaultcolor) {\r\n  return createElement('circle', [\r\n    ['cx', x],\r\n    ['cy', y],\r\n    ['r', radius],\r\n    ['fill', defaultcolor]\r\n  ])\r\n}\r\n\r\nexport function createDefinitionBlock() {\r\n  return createElement('defs', [])\r\n}\r\n\r\nexport function createGroupElement() {\r\n  return createElement('g', [])\r\n}\r\n\r\nexport function createSVGRoot(totalSize) {\r\n  return createElement('svg', [\r\n    ['width', totalSize],\r\n    ['height', totalSize]\r\n  ])\r\n}\r\n\r\nexport function createTitle(label) {\r\n  const titleElement = createElement('title', [])\r\n  titleElement.innerHTML = label\r\n  return titleElement\r\n}\r\n","export function getRandomSixDigitString() {\r\n  const str = \"\" + Math.floor(Math.random() * (999999 - 1)) + 1;\r\n  return str.padStart(6, \"0\");\r\n}\r\n","import { getRandomSixDigitString } from './randomizer'\r\n\r\nconst colors = [\r\n  '#FF0000',\r\n  '#FF7F00',\r\n  '#FFFF00',\r\n  '#00FF00',\r\n  '#00FFFF',\r\n  '#0000FF',\r\n  '#8B00FF'\r\n]\r\n\r\nfunction formatLabel(item) {\r\n  const { label } = item\r\n  if (label) return item\r\n  else\r\n    return {\r\n      ...item,\r\n      label: `${item.value}`\r\n    }\r\n}\r\n\r\nfunction formatColor(item, index) {\r\n  const { color } = item\r\n  if (color) return item\r\n  else\r\n    return {\r\n      ...item,\r\n      color: colors[index]\r\n    }\r\n}\r\n\r\nexport function formatToArrayOfObjects(inputItems) {\r\n  const isNumber = (currentValue) => typeof currentValue === 'number'\r\n  const isAllNumbers = inputItems.every(isNumber)\r\n  let items = inputItems\r\n  if (isAllNumbers) {\r\n    items = inputItems.map((item) => ({ value: item }))\r\n  }\r\n  return items\r\n}\r\n\r\nexport function reverseString(str) {\r\n  return str.split('').reverse().join('')\r\n}\r\n\r\nexport function formatItems(inputItems, defaultLabelColor) {\r\n  const items = formatToArrayOfObjects(inputItems)\r\n\r\n  const hasValueProperty = (currentValue) => currentValue.value != null\r\n  const isAllValid = items.every(hasValueProperty)\r\n  if (!isAllValid) {\r\n    throw new Error('Invalid Data Found, All items must have a value property')\r\n  }\r\n\r\n  const formatLabelColorWithDefault = (item) =>\r\n    formatLabelColor(item, defaultLabelColor)\r\n\r\n  const total = items.reduce((acc, item) => acc + item.value, 0)\r\n  return items\r\n    .map((item) => ({\r\n      ...item,\r\n      percentage: (item.value / total) * 100\r\n    }))\r\n    .map(formatLabel)\r\n    .map(formatColor)\r\n    .map(formatLabelColorWithDefault)\r\n    .map(formatSliceId)\r\n    .map(formatSlicePreviousId)\r\n}\r\n\r\nexport function formatLabelColor(item, defaultLabelColor) {\r\n  return {\r\n    ...{ labelColor: defaultLabelColor },\r\n    ...item\r\n  }\r\n}\r\n\r\nexport function formatSliceId(item) {\r\n  const { value } = item\r\n\r\n  const id = value + '' + getRandomSixDigitString()\r\n\r\n  return {\r\n    ...{ id: id },\r\n    ...item\r\n  }\r\n}\r\nexport function formatSlicePreviousId(item, index, array) {\r\n  // console.log(index)\r\n  // console.log(array)\r\n\r\n  const previousItem = array[index - 1]\r\n  const { id: previousId } = previousItem || { id: null }\r\n\r\n  return {\r\n    ...{ previousId: previousId },\r\n    ...item\r\n  }\r\n}\r\n","/**\r\n * Convert a polar coordinate (r,theta) to cartesian (x,y). The calculations are x=r*cos(theta) and y=r*sin(theta).\r\n * This Method is used in the DoughnutChart. to calculate the x,y position from center of a sliceElement.\r\n * Usually in Math the origin is Zero, Since the center of the doughnut is the origin, the centerX and centerY are added to the result.\r\n * @param centerX - Center of Circle X\r\n * @param centerY - Center of Circle Y\r\n * @param radius  - Radius of Circle\r\n * @param angleInDegrees - Angle in Degrees\r\n * @returns {{x: *, y: *}}\r\n */\r\nexport function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\r\n\r\n  var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\r\n\r\n  return {\r\n    x: centerX + radius * Math.cos(angleInRadians),\r\n    y: centerY + radius * Math.sin(angleInRadians)\r\n  }\r\n}\r\n\r\n\r\nexport function drawingCoordinatesBetweenInnerAndOuterCircle(\r\n  { innerRadius, outerRadius },\r\n  { startAngle, endAngle },\r\n  { x, y }\r\n) {\r\n  const middleRadius = innerRadius + (outerRadius - innerRadius) / 2 -20\r\n\r\n  const drawingCoordinatesForText = drawingCoordinatesForTextPosition(\r\n    { x, y },\r\n    {\r\n      startAngle,\r\n      endAngle: endAngle\r\n    },\r\n    middleRadius\r\n  )\r\n  return drawingCoordinatesForText\r\n}\r\n\r\n\r\nexport function drawingCoordinatesForTextPosition(\r\n  { x, y },\r\n  { startAngle, endAngle },\r\n  radius\r\n) {\r\n  const startPoint = polarToCartesian(x, y, radius, startAngle)\r\n  const endPoint = polarToCartesian(x, y, radius, endAngle)\r\n\r\n  const arcSweep = endAngle - startAngle <= 180 ? '0' : '1'\r\n\r\n  const d = [\r\n    'M',    endPoint.x,    endPoint.y,\r\n    'A',    radius,    radius,    0,    arcSweep,    0,    startPoint.x,    startPoint.y\r\n\r\n  ].join(' ')\r\n\r\n  return d\r\n}\r\n","import { polarToCartesian } from \"./calculations\";\r\nimport { createElement } from \"../builder/elements\";\r\n\r\n/**\r\n * Get Drawing Coordinates for an Arc , The arc is a fully closed area in a circle\r\n *  The arc is drawn from the startAngle to the endAngle\r\n * The arc is drawn in the clockwise direction\r\n * @param x - Center of Circle X\r\n * @param y - Center of Circle Y\r\n * @param startAngle - Start Angle in Degrees\r\n * @param endAngle - End Angle in Degrees\r\n * @param radius - Radius of Circle\r\n */\r\nexport function coordinatesForArc(\r\n  { x, y },\r\n  { startAngle, endAngle },\r\n  radius\r\n) {\r\n  const startPoint = polarToCartesian(x, y, radius, startAngle);\r\n  const endPoint = polarToCartesian(x, y, radius, endAngle);\r\n\r\n  const arcSweep = endAngle - startAngle <= 180 ? \"0\" : \"1\";\r\n\r\n  const d = [\r\n    \"M\", endPoint.x, endPoint.y,\r\n    \"A\", radius, radius, 0, arcSweep, 0, startPoint.x, startPoint.y\r\n  ].join(\" \");\r\n\r\n  return d;\r\n}\r\n\r\n\r\nexport function createArc(containerAttributes, point, angles, radius) {\r\n  const innerArc = createElement(\"path\", containerAttributes);\r\n  const innerArcData = coordinatesForArc(point, angles, radius);\r\n  innerArc.setAttributeNS(null, \"d\", innerArcData);\r\n  return innerArc;\r\n}\r\n\r\nexport function createArcForSlice(\r\n  point,\r\n  angles,\r\n  { outerRadius, innerRadius },\r\n  color\r\n  , strokeArray) {\r\n  const borderWidth = outerRadius - innerRadius;\r\n\r\n  const strokeData = strokeArray * -1;\r\n  const containerAttributes = [\r\n    [\"fill\", \"none\"],\r\n    [\"stroke\", color],\r\n    [\"stroke-width\", borderWidth],\r\n    [\"stroke-dashoffset\", \"\" + strokeData],\r\n    [\"stroke-dasharray\", \"\" + strokeArray],\r\n    [\"class\", \"path-container\"]\r\n  ];\r\n\r\n  return createArc(containerAttributes, point, angles, innerRadius);\r\n}\r\n","import {\r\n  createCircle,\r\n  createDefinitionBlock,\r\n  createElement\r\n} from '../builder/elements'\r\nimport { createArcForSlice } from '../draw/arc'\r\n\r\nexport function createArcAnimation(strokeArray, duration = '2s') {\r\n  const animateElement = createElement('animate', [\r\n    ['attributeType', 'CSS'],\r\n    ['attributeName', 'stroke-dashoffset'],\r\n    ['values', '0;' + strokeArray],\r\n    ['dur', duration],\r\n    ['fill', 'freeze']\r\n  ])\r\n  return animateElement\r\n}\r\n\r\nexport function createOpacityAnimation(duration) {\r\n  const animateElement = createElement('animate', [\r\n    ['attributeName', 'opacity'],\r\n    ['from', '1'],\r\n    ['to', '0'],\r\n    ['dur', duration],\r\n    ['begin', '.5s'],\r\n    ['fill', 'freeze'],\r\n    ['repeatCount', '1']\r\n  ])\r\n  return animateElement\r\n}\r\n\r\nexport function getBorderAnimation(\r\n  { x, y },\r\n  { innerRadius, outerRadius },\r\n  { startAngle, endAngle },\r\n  backgroundColor,\r\n  animationDurationInSeconds\r\n) {\r\n  const strokeArray = 900\r\n  const adjustedAngle = 20\r\n  const animatedMaskArc = createArcForSlice(\r\n    { x, y },\r\n    {\r\n      startAngle: startAngle - adjustedAngle,\r\n      endAngle: endAngle + adjustedAngle\r\n    },\r\n    {\r\n      innerRadius,\r\n      outerRadius: outerRadius + 10\r\n    },\r\n    backgroundColor,\r\n    strokeArray\r\n  )\r\n\r\n  animatedMaskArc.setAttribute('stroke-dashoffset', '0')\r\n  const animateElement = createArcAnimation(\r\n    strokeArray,\r\n    animationDurationInSeconds + 's'\r\n  )\r\n\r\n  animatedMaskArc.appendChild(animateElement)\r\n  return animatedMaskArc\r\n}\r\n\r\nexport function getCenterTitleAnimation(\r\n  { x, y },\r\n  radius,\r\n  backgroundColor,\r\n  animationDurationInSeconds\r\n) {\r\n  const animatedMaskCircle = createCircle({ x, y }, radius, backgroundColor)\r\n  const duration = animationDurationInSeconds + 1 + 's'\r\n  const animateElement = createOpacityAnimation(duration)\r\n\r\n  animatedMaskCircle.appendChild(animateElement)\r\n\r\n  return animatedMaskCircle\r\n}\r\n\r\n/**\r\n * Based on W3 Spec\r\n *  <defs>\r\n *     <filter id=\"MyFilter\" filterUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\r\n *      <desc>Produces a 3D lighting effect.</desc>\r\n *   <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"4\" result=\"blur\"/>\r\n *   <feOffset in=\"blur\" dx=\"4\" dy=\"4\" result=\"offsetBlur\"/>\r\n *   <feSpecularLighting in=\"blur\" surfaceScale=\"5\" specularConstant=\".5\"\r\n *                       specularExponent=\"20\" lighting-color=\"#bbbbbb\"\r\n *                       result=\"specOut\">\r\n *     <fePointLight x=\"-5000\" y=\"-10000\" z=\"20000\"/>\r\n *   </feSpecularLighting>\r\n *   <feComposite in=\"specOut\" in2=\"SourceAlpha\" operator=\"in\" result=\"specOut\"/>\r\n *   <feComposite in=\"SourceGraphic\" in2=\"specOut\" operator=\"arithmetic\"\r\n *                k1=\"0\" k2=\"1\" k3=\"1\" k4=\"0\" result=\"litPaint\"/>\r\n *\r\n *\r\n *     </filter>\r\n *   </defs>\r\n *\r\n */\r\n\r\nexport function createHoverFilter() {\r\n  const filter = createElement('filter', [\r\n    ['id', 'glowfilter'],\r\n    ['filterUnits', 'userSpaceOnUse'],\r\n    ['x', '0'],\r\n    ['y', '0'],\r\n    ['width', '100%'],\r\n    ['height', '100%']\r\n  ])\r\n\r\n  const desc = createElement('desc', [], 'Produces a 3D lighting effect.')\r\n  filter.appendChild(desc)\r\n\r\n  // <feMorphology operator=\"dilate\" radius=\"2\"/>\r\n  const fegaussianBlur = createElement('feMorphology', [\r\n    ['operator', 'dilate'],\r\n    ['radius', '2']\r\n  ])\r\n  filter.appendChild(fegaussianBlur)\r\n\r\n  const defs = createDefinitionBlock()\r\n  defs.appendChild(filter)\r\n  return defs\r\n}\r\n\r\nexport function create3deffect() {\r\n  const filter = createElement('filter', [\r\n    ['id', 'glowfilter'],\r\n    ['filterUnits', 'userSpaceOnUse'],\r\n    ['x', '0'],\r\n    ['y', '0'],\r\n    ['width', '100%'],\r\n    ['height', '100%']\r\n  ])\r\n\r\n  const desc = createElement('desc', [], 'Produces a 3D lighting effect.')\r\n  filter.appendChild(desc)\r\n  const fegaussianBlur = createElement('feGaussianBlur', [\r\n    ['in', 'SourceAlpha'],\r\n    ['stdDeviation', '4'],\r\n    ['result', 'blur']\r\n  ])\r\n  filter.appendChild(fegaussianBlur)\r\n  const feOffset = createElement('feOffset', [\r\n    ['in', 'blur'],\r\n    ['dx', '4'],\r\n    ['dy', '4'],\r\n    ['result', 'offsetBlur']\r\n  ])\r\n  filter.appendChild(feOffset)\r\n  const fepointLight = createElement('fePointLight', [\r\n    ['x', '-5000'],\r\n    ['y', '-10000'],\r\n    ['z', '20000']\r\n  ])\r\n  const feSpecularLighting = createElement('feSpecularLighting', [\r\n    ['in', 'blur'],\r\n    ['surfaceScale', '5'],\r\n    ['specularConstant', '.5'],\r\n    ['specularExponent', '20'],\r\n    ['lighting-color', '#bbbbbb'],\r\n    ['result', 'specOut']\r\n  ])\r\n  feSpecularLighting.appendChild(fepointLight)\r\n  filter.appendChild(feSpecularLighting)\r\n  const feCompositeSpecOut = createElement('feComposite', [\r\n    ['in', 'specOut'],\r\n    ['in2', 'SourceAlpha'],\r\n    ['operator', 'in'],\r\n    ['result', 'specOut']\r\n  ])\r\n  filter.appendChild(feCompositeSpecOut)\r\n  const feCompositeSourceGraphic = createElement('feComposite', [\r\n    ['in', 'SourceGraphic'],\r\n    ['in2', 'specOut'],\r\n    ['operator', 'arithmetic'],\r\n    ['k1', '0'],\r\n    ['k2', '1'],\r\n    ['k3', '1'],\r\n    ['k4', '0'],\r\n    ['result', 'litPaint']\r\n  ])\r\n  filter.appendChild(feCompositeSourceGraphic)\r\n  const defs = createDefinitionBlock()\r\n  defs.appendChild(filter)\r\n  return defs\r\n}\r\n","export const thicknessWithRatio = {\r\n  XXL: 150,\r\n  XL: 125,\r\n  L: 100,\r\n  M: 50,\r\n  S: 35\r\n}\r\n\r\nexport const sizeWithAngles = {\r\n  XXL: [261, 460],\r\n  XL: [241, 480],\r\n  L: [221, 500],\r\n  M: [201, 520],\r\n  S: [181, 540]\r\n}\r\nexport const colors = [\r\n  '#FF0000',\r\n  '#FF7F00',\r\n  '#FFFF00',\r\n  '#00FF00',\r\n  '#00FFFF',\r\n  '#0000FF',\r\n  '#8B00FF'\r\n]\r\n\r\nexport const chartStyles = `\r\n\r\n\r\n.description {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  background: white;\r\n  padding: 10px 15px;\r\n  z-index: 5;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  margin: 0 auto;\r\n  color: #21669e;\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 0 1px #eee;\r\n  -moz-transform: translateX(-50%);\r\n  -ms-transform: translateX(-50%);\r\n  -webkit-transform: translateX(-50%);\r\n  transform: translateX(-50%);\r\n  display: none;\r\n}\r\n.description.active {\r\n  display: block;\r\n}\r\n.description:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 100%;\r\n  width: 0;\r\n  height: 0;\r\n  margin-left: -10px;\r\n  border-left: 10px solid transparent;\r\n  border-right: 10px solid transparent;\r\n  border-top: 10px solid white;\r\n}\r\n\r\n\r\n.horse-chart-tooltip::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    margin-left: -5px;\r\n    border-width: 5px;\r\n    border-style: solid;\r\n    border-color: cornsilk transparent transparent transparent;\r\n}\r\n.tooltip-animation-on\r\n{\r\n    display: block;\r\n\r\n    -webkit-animation: fadeInFromNone 0.5s ease-out;\r\n    -moz-animation: fadeInFromNone 0.5s ease-out;\r\n    -o-animation: fadeInFromNone 0.5s ease-out;\r\n    animation: fadeInFromNone 0.5s ease-out;\r\n}\r\n@keyframes fadeInFromNone {\r\n    0% {\r\n        display: none;\r\n        opacity: 0;\r\n    }\r\n\r\n    1% {\r\n        display: block;\r\n        opacity: 0;\r\n    }\r\n\r\n    100% {\r\n        display: block;\r\n        opacity: 1;\r\n    }\r\n}\r\n.tooltip-animation-off\r\n{\r\n    display: block;\r\n\r\n    -webkit-animation: fadeOutFromNone 0.5s ease-out;\r\n    -moz-animation: fadeOutFromNone 0.5s ease-out;\r\n    -o-animation: fadeOutFromNone 0.5s ease-out;\r\n    animation: fadeOutFromNone 0.5s ease-out;\r\n}\r\n@keyframes fadeOutFromNone {\r\n    0% {\r\n        display: block;\r\n        opacity: 1;\r\n    }\r\n\r\n    1% {\r\n        display: block;\r\n        opacity: 0;\r\n    }\r\n\r\n    100% {\r\n        display: none;\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n\r\n  foreignObject {\r\n    cursor: pointer;\r\n  }\r\n\r\n  a text {\r\n    transition: all 0.5s ease;\r\n    filter: ;\r\n    cursor: pointer;\r\n  }\r\n    a .path-container {\r\n\r\n      transition: all 0.5s ease;\r\n      filter: brightness(0.7);\r\n    }\r\n   a:hover .path-container {\r\n    cursor: pointer;\r\n    transition: all 0.5s ease;\r\n   filter:brightness(0.8);\r\n  }\r\n\r\n`\r\n\r\nexport const hoverStyles=`\r\n\r\n  a:hover .path-container {\r\n    cursor: pointer;\r\n    transition: all 0.5s ease;\r\n   filter:url(#glowfilter) brightness(1.0);\r\n  }\r\n\r\n  a:hover text {\r\n    transition: all 0.5s ease;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n  }\r\n`\r\n","import { createContainer, createElement } from \"../builder/elements\";\r\nimport { drawingCoordinatesBetweenInnerAndOuterCircle } from \"../draw/calculations\";\r\nimport { reverseString } from \"../shared/formatter\";\r\n\r\n\r\nfunction createTextDefinition(textId, innerAndOuterRadius, angles, point) {\r\n  const textPathDefinitionElement = createElement('defs', [])\r\n\r\n  const pathToDrawTextElement = createElement('path', [\r\n    ['id', textId],\r\n    ['stroke-width', '0']\r\n  ])\r\n  textPathDefinitionElement.appendChild(pathToDrawTextElement)\r\n  const drawingCoordinatesForText =\r\n    drawingCoordinatesBetweenInnerAndOuterCircle(\r\n      innerAndOuterRadius,\r\n      angles,\r\n      point\r\n    )\r\n  pathToDrawTextElement.setAttributeNS(null, 'd', drawingCoordinatesForText)\r\n  return textPathDefinitionElement\r\n}\r\n\r\nfunction createTextElement(textId, { label, labelSize, labelColor }) {\r\n  const textElement = createElement('text', [\r\n    ['font-size', labelSize + 'px'],\r\n    ['fill', labelColor],\r\n    ['rotate', '180']\r\n  ])\r\n  const textPathElement = createElement('textPath', [\r\n    ['href', '#' + textId],\r\n    ['text-anchor', 'middle'],\r\n    ['startOffset', '50%']\r\n  ])\r\n\r\n  // 180 degree reverses stuff\r\n  textPathElement.innerHTML = reverseString(label)\r\n  textElement.appendChild(textPathElement)\r\n  return textElement\r\n}\r\n\r\nexport function getTextElements(\r\n  id,\r\n  { label, labelSize, labelColor },\r\n  innerAndOuterRadius,\r\n  angles,\r\n  point\r\n) {\r\n  const textId = 'text' + id\r\n  const textPositionPathElement = createTextDefinition(\r\n    textId,\r\n    innerAndOuterRadius,\r\n    angles,\r\n    point\r\n  )\r\n  const textElement = createTextElement(textId, {\r\n    label,\r\n    labelSize,\r\n    labelColor\r\n  })\r\n\r\n  const container=createContainer();\r\n  container.appendChild(textPositionPathElement)\r\n  container.appendChild(textElement)\r\n  return  container;\r\n\r\n}\r\n","import { createElement, createTitle } from '../builder/elements'\r\nimport { createArcForSlice } from '../draw/arc'\r\nimport { getTextElements } from '../draw/textInArc'\r\n\r\nexport function getSliceElement(\r\n  angles,\r\n  { label, value, color, labelColor },\r\n  point,\r\n  { innerRadius, outerRadius },\r\n  { labelSize },\r\n  { id, previousId }\r\n) {\r\n  const containerId = 'box' + id\r\n  const sliceAttributes = [\r\n    ['id', 'container' + containerId],\r\n    ['class', 'slice-container'],\r\n    ['style', 'text-decoration: none;']\r\n  ]\r\n\r\n  const container = createElement('a', sliceAttributes)\r\n\r\n  container.appendChild(createTitle(label))\r\n  // setupToolTips(label, container);\r\n\r\n  const arc = createArcForSlice(\r\n    point,\r\n    angles,\r\n    { innerRadius, outerRadius },\r\n    color,\r\n    0\r\n  )\r\n\r\n  container.appendChild(arc)\r\n\r\n  const textContainer = getTextElements(\r\n    id,\r\n    { label, labelSize, labelColor },\r\n    { innerRadius, outerRadius },\r\n    angles,\r\n    point\r\n  )\r\n  container.appendChild(textContainer)\r\n\r\n  return container\r\n}\r\n","import { createElement, createHtmlElement } from '../builder/elements'\r\n\r\nexport const PADDING_RATIO = 0.8\r\nexport function getTitleContainer({ x, y }, radius, imgUrl, title, textColor) {\r\n  // let {x,y} = polarToCartesian(centerX, centerY, radius, 90);\r\n\r\n  const mainElement = createHtmlElement('div', [\r\n    [\r\n      'style',\r\n      'display: table-cell; text-align: center; vertical-align: middle;color:' +\r\n        textColor +\r\n        ';'\r\n    ]\r\n  ])\r\n  const paddedRadius = radius * PADDING_RATIO\r\n\r\n  const imgElement = createHtmlElement('img', [\r\n    ['src', imgUrl],\r\n    ['width', paddedRadius],\r\n    ['height', paddedRadius]\r\n  ])\r\n  const breakElement = createHtmlElement('br', [])\r\n  mainElement.appendChild(imgElement)\r\n  mainElement.appendChild(breakElement)\r\n  mainElement.innerHTML += title\r\n\r\n  const container = createHtmlElement('div', [\r\n    ['style', 'display: table; font-size: 24px; width: 100%; height: 100%;']\r\n  ])\r\n  container.appendChild(mainElement)\r\n\r\n  const paddedX = x - paddedRadius\r\n  const paddedY = y - paddedRadius\r\n  // y = centerY + radius;\r\n  const width = paddedRadius * 2\r\n  const height = paddedRadius * 2\r\n  //  <foreignObject x=\"20\" y=\"20\" width=\"160\" height=\"160\">\r\n  const foreignObject = createElement('foreignObject', [\r\n    ['x', paddedX],\r\n    ['y', paddedY],\r\n    ['width', width],\r\n    ['height', height]\r\n  ])\r\n\r\n  foreignObject.appendChild(container)\r\n\r\n  return foreignObject\r\n}\r\n","import {\r\n  createElement,\r\n  createGroupElement,\r\n  createSVGRoot\r\n} from './builder/elements'\r\n\r\nimport { formatItems } from './shared/formatter'\r\nimport {\r\n  createHoverFilter,\r\n  getBorderAnimation,\r\n  getCenterTitleAnimation\r\n} from './components/Animator'\r\nimport {\r\n  chartStyles, hoverStyles,\r\n  sizeWithAngles,\r\n  thicknessWithRatio\r\n} from \"./shared/config\";\r\nimport { getSliceElement } from './components/Slice'\r\nimport { getTitleContainer } from './components/TitleContainer'\r\n\r\nfunction getPoint(totalSize) {\r\n  const x = totalSize / 2\r\n  const y = totalSize / 2\r\n  return { x, y }\r\n}\r\n\r\nfunction getChartStyleElement({showGlow}) {\r\n\r\n  let result =\"\";\r\n  if(showGlow)\r\n    result = hoverStyles ;\r\n\r\n  const styleElement = createElement('style', [])\r\n  styleElement.innerHTML = result + chartStyles\r\n  return styleElement\r\n}\r\n\r\nexport function HorseShoeChartCreator(items, options) {\r\n  // insertStyles(chartStyles);\r\n  const defaultOptions = {\r\n    radius: 100,\r\n    showAnimation: false,\r\n    animationDurationInSeconds: 5,\r\n    title: '',\r\n    titleColor: '#FF0000',\r\n    thicknessSize: 'M',\r\n    gapSize: 'XL',\r\n    showGlow: false,\r\n    labelSize: 12,\r\n    labelColor: 'white',\r\n    backgroundColor: 'white',\r\n    imageUrl:\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\n  }\r\n\r\n  const mergedOptions = { ...defaultOptions, ...options }\r\n  const formattedOptions = {\r\n    ...mergedOptions,\r\n    showAnimation: String(mergedOptions.showAnimation) === 'true',\r\n    showGlow: String(mergedOptions.showGlow) === 'true',\r\n    radius: Number(mergedOptions.radius),\r\n    animationDurationInSeconds: Number(\r\n      mergedOptions.animationDurationInSeconds\r\n    ),\r\n    labelSize: Number(mergedOptions.labelSize)\r\n  }\r\n\r\n  const {\r\n    radius,\r\n    title,\r\n    showGlow,\r\n    thicknessSize,\r\n    showAnimation,\r\n    animationDurationInSeconds,\r\n    gapSize,\r\n    backgroundColor,\r\n    imageUrl,\r\n    titleColor,\r\n    labelSize,\r\n    labelColor\r\n  } = formattedOptions\r\n  const thicknessOfCircle = thicknessWithRatio[thicknessSize]\r\n  const totalSize = (radius + thicknessOfCircle) * 2\r\n\r\n  const { x, y } = getPoint(totalSize)\r\n\r\n  const outerRadius = radius + thicknessOfCircle\r\n  const sizeWithAngle = sizeWithAngles[gapSize]\r\n  const [startAngle, endAngle] = sizeWithAngle\r\n  const total = (endAngle - startAngle) / 100\r\n  const percentageToDegree = (percent) => percent * total\r\n\r\n  const container = createGroupElement()\r\n\r\n  const centerTitleContainer = getTitleContainer(\r\n    { x, y },\r\n    radius,\r\n    imageUrl,\r\n    title,\r\n    titleColor\r\n  )\r\n\r\n  container.appendChild(centerTitleContainer)\r\n\r\n  let currentAngle = startAngle\r\n\r\n  const formattedItems = formatItems(items, labelColor)\r\n\r\n  if (showGlow) {\r\n    console.log('showGlow')\r\n    const filterElement = createHoverFilter()\r\n    container.appendChild(filterElement)\r\n  }\r\n  formattedItems.forEach((item, index) => {\r\n    const { percentage, id, previousId } = item\r\n    const endAngle = currentAngle + percentageToDegree(percentage)\r\n\r\n    const currentBoxElement = getSliceElement(\r\n      { startAngle: currentAngle, endAngle },\r\n      item,\r\n      {\r\n        x,\r\n        y\r\n      },\r\n      { innerRadius: radius, outerRadius: outerRadius },\r\n      { labelSize, labelColor },\r\n      { id, previousId }\r\n    )\r\n\r\n    container.appendChild(currentBoxElement)\r\n    currentAngle = endAngle\r\n  })\r\n\r\n  if (showAnimation) {\r\n    const borderAnimation = getBorderAnimation(\r\n      { x, y },\r\n      {\r\n        innerRadius: radius,\r\n        outerRadius: outerRadius\r\n      },\r\n      { startAngle, endAngle: currentAngle },\r\n      backgroundColor,\r\n      animationDurationInSeconds\r\n    )\r\n    container.appendChild(borderAnimation)\r\n\r\n    const centerTitleAnimation = getCenterTitleAnimation(\r\n      { x, y },\r\n      radius,\r\n      backgroundColor,\r\n      animationDurationInSeconds\r\n    )\r\n    container.appendChild(centerTitleAnimation)\r\n    centerTitleAnimation.querySelector('animate').onend = () => {\r\n      container.removeChild(centerTitleAnimation)\r\n      container.removeChild(borderAnimation)\r\n    }\r\n  }\r\n\r\n  const root = createSVGRoot(totalSize)\r\n  const styleElement = getChartStyleElement({ showGlow })\r\n  root.appendChild(styleElement)\r\n  root.appendChild(container)\r\n\r\n  return root\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { HorseShoeChartCreator } from \"./core/HorseShoeChartCreator\";\r\n\r\nexport const HorseShoeChart = ({ items,options }) => {\r\n\r\n\r\n  const svg = useRef(null);\r\n\r\n\r\n  useEffect(() => {\r\n\r\n\r\n    const result= HorseShoeChartCreator(items,options )\r\n\r\n    if(svg.current){\r\n\r\n\r\n\r\n      if(svg.current.children.length>0){\r\n        svg.current.removeChild(svg.current.children[0])\r\n      }\r\n       svg.current.appendChild(result)\r\n      // svg.current.parentNode.replaceChild(result, svg.current);\r\n    }\r\n\r\n\r\n  }, [items,options])\r\n\r\n  // return   <div dangerouslySetInnerHTML={{ __html: state }} />\r\n  return   <div ref={svg}/>\r\n\r\n\r\n}\r\n"],"names":["SVG_NAMESPACE","createElement","name","attribs","xmlns","svgElem","document","createElementNS","forEach","value","setAttributeNS","createHtmlElement","element","setAttribute","createContainer","container","createCircle","radius","defaultcolor","x","y","createDefinitionBlock","createGroupElement","createSVGRoot","totalSize","createTitle","label","titleElement","innerHTML","getRandomSixDigitString","str","Math","floor","random","padStart","colors","formatLabel","item","formatColor","index","color","formatToArrayOfObjects","inputItems","isNumber","currentValue","isAllNumbers","every","items","map","reverseString","split","reverse","join","formatItems","defaultLabelColor","hasValueProperty","isAllValid","Error","formatLabelColorWithDefault","formatLabelColor","total","reduce","acc","percentage","formatSliceId","formatSlicePreviousId","labelColor","id","array","previousItem","previousId","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","PI","cos","sin","drawingCoordinatesBetweenInnerAndOuterCircle","innerRadius","outerRadius","startAngle","endAngle","middleRadius","drawingCoordinatesForText","drawingCoordinatesForTextPosition","startPoint","endPoint","arcSweep","d","coordinatesForArc","createArc","containerAttributes","point","angles","innerArc","innerArcData","createArcForSlice","strokeArray","borderWidth","strokeData","createArcAnimation","duration","animateElement","createOpacityAnimation","getBorderAnimation","backgroundColor","animationDurationInSeconds","adjustedAngle","animatedMaskArc","appendChild","getCenterTitleAnimation","animatedMaskCircle","createHoverFilter","filter","desc","fegaussianBlur","defs","thicknessWithRatio","XXL","XL","L","M","S","sizeWithAngles","chartStyles","hoverStyles","createTextDefinition","textId","innerAndOuterRadius","textPathDefinitionElement","pathToDrawTextElement","createTextElement","labelSize","textElement","textPathElement","getTextElements","textPositionPathElement","getSliceElement","containerId","sliceAttributes","arc","textContainer","PADDING_RATIO","getTitleContainer","imgUrl","title","textColor","mainElement","paddedRadius","imgElement","breakElement","paddedX","paddedY","width","height","foreignObject","getPoint","getChartStyleElement","showGlow","result","styleElement","HorseShoeChartCreator","options","defaultOptions","showAnimation","titleColor","thicknessSize","gapSize","imageUrl","mergedOptions","formattedOptions","String","Number","thicknessOfCircle","sizeWithAngle","percentageToDegree","percent","centerTitleContainer","currentAngle","formattedItems","console","log","filterElement","currentBoxElement","borderAnimation","centerTitleAnimation","querySelector","onend","removeChild","root","HorseShoeChart","svg","useRef","useEffect","current","children","length"],"mappings":"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"}