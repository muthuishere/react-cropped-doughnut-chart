{"version":3,"file":"index.modern.js","sources":["../src/core/elements.js","../src/core/calculations.js","../src/core/HtmlContainerElement.js","../src/core/formatter.js","../src/core/SliceElement.js","../src/core/DoughnutElement.js","../src/index.js"],"sourcesContent":["export const SVG_NAMESPACE = 'http://www.w3.org/2000/svg'\nexport function createElement(name, attribs) {\n  const xmlns = SVG_NAMESPACE\n  const svgElem = document.createElementNS(xmlns, name)\n\n  attribs.forEach(([name, value]) => svgElem.setAttributeNS(null, name, value))\n\n  return svgElem\n}\n\nexport function createHtmlElement(name, attribs) {\n  const element = document.createElement(name)\n\n  attribs.forEach(([name, value]) => element.setAttribute(name, value))\n\n  return element\n}\n\n\nexport function setAttributeForSvg(element, name, value) {\n  element.setAttributeNS(null, name, value)\n}\n\n","export function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n  /**\n   * Convert a polar coordinate (r,theta) to cartesian (x,y). The calculations are x=r*cos(theta) and y=r*sin(theta).\n   * This Method is used in the DoughnutChart. to calculate the x,y position from center of a sliceElement.\n   * Usually in Math the origin is Zero, Since the center of the doughnut is the origin, the centerX and centerY are added to the result.\n   * @param centerX - Center of Circle X\n   * @param centerY - Center of Circle Y\n   * @param radius  - Radius of Circle\n   * @param angleInDegrees - Angle in Degrees\n   * @returns {{x: *, y: *}}\n   */\n  var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\n\n  return {\n    x: centerX + radius * Math.cos(angleInRadians),\n    y: centerY + radius * Math.sin(angleInRadians)\n  }\n}\n\n/**\n * Get Drawing Coordinates for an Arc , The arc is a fully closed area in a circle\n *  The arc is drawn from the startAngle to the endAngle\n * The arc is drawn in the clockwise direction\n * @param x - Center of Circle X\n * @param y - Center of Circle Y\n * @param startAngle - Start Angle in Degrees\n * @param endAngle - End Angle in Degrees\n * @param radius - Radius of Circle\n */\nexport function drawingCoordinatesinCircle(\n  { x, y },\n  { startAngle, endAngle },\n  radius\n) {\n  const startPoint = polarToCartesian(x, y, radius, startAngle)\n  const endPoint = polarToCartesian(x, y, radius, endAngle)\n\n  const arcSweep = endAngle - startAngle <= 180 ? '0' : '1'\n\n  const d = [\n    'M',\n    endPoint.x,\n    endPoint.y,\n    'A',\n    radius,\n    radius,\n    0,\n    arcSweep,\n    0,\n    startPoint.x,\n    startPoint.y,\n    'L',\n    x,\n    y,\n    'L',\n    endPoint.x,\n    endPoint.y\n  ].join(' ')\n\n  return d\n}\n\nexport function drawingCoordinatesBetweenInnerAndOuterCircle(\n  { innerRadius, outerRadius },\n  { startAngle, endAngle },\n  { x, y }\n) {\n  const middleRadius = innerRadius + (outerRadius - innerRadius) / 2\n  const middleAngle = startAngle + (endAngle - startAngle) / 2\n  const drawingCoordinatesForText = drawingCoordinatesinCircle(\n    { x, y },\n    {\n      startAngle,\n      endAngle: middleAngle\n    },\n    middleRadius\n  )\n  return drawingCoordinatesForText\n}\n","import { createElement, createHtmlElement } from './elements'\n\nexport const PADDING_RATIO = 0.8\nexport function getHtmlContainerElement({ x, y }, radius, imgUrl, title, textColor) {\n  // let {x,y} = polarToCartesian(centerX, centerY, radius, 90);\n\n  const mainElement = createHtmlElement('div', [\n    [\n      'style',\n      'display: table-cell; text-align: center; vertical-align: middle;color:' +\n        textColor +\n        ';'\n    ]\n  ])\n  const paddedRadius = radius * PADDING_RATIO\n\n  const imgElement = createHtmlElement('img', [\n    ['src', imgUrl],\n    ['width', paddedRadius],\n    ['height', paddedRadius]\n  ])\n  const breakElement = createHtmlElement('br', [])\n  mainElement.appendChild(imgElement)\n  mainElement.appendChild(breakElement)\n  mainElement.innerHTML += title\n\n  const container = createHtmlElement('div', [\n    ['style', 'display: table; font-size: 24px; width: 100%; height: 100%;']\n  ])\n  container.appendChild(mainElement)\n\n  const paddedX = x - paddedRadius\n  const paddedY = y - paddedRadius\n  // y = centerY + radius;\n  const width = paddedRadius * 2\n  const height = paddedRadius * 2\n  //  <foreignObject x=\"20\" y=\"20\" width=\"160\" height=\"160\">\n  const foreignObject = createElement('foreignObject', [\n    ['x', paddedX],\n    ['y', paddedY],\n    ['width', width],\n    ['height', height]\n  ])\n\n  foreignObject.appendChild(container)\n\n  return foreignObject\n}\n","const colors = [\n  '#FF0000',\n  '#FF7F00',\n  '#FFFF00',\n  '#00FF00',\n  '#00FFFF',\n  '#0000FF',\n  '#8B00FF'\n]\nfunction formatLabel(item) {\n  const { label } = item\n  if (label) return item\n  else\n    return {\n      ...item,\n      label: `${item.value}`\n    }\n}\n\nfunction formatColor(item, index) {\n  const { color } = item\n  if (color) return item\n  else\n    return {\n      ...item,\n      color: colors[index]\n    }\n}\n\nexport function formatToArrayOfObjects(inputItems) {\n  const isNumber = (currentValue) => typeof currentValue === 'number'\n  const isAllNumbers = inputItems.every(isNumber)\n  let items = inputItems\n  if (isAllNumbers) {\n    items = inputItems.map((item) => ({ value: item }))\n  }\n  return items\n}\nexport function reverseString(str) {\n  return str.split(\"\").reverse().join(\"\");\n}\nexport function formatItems(inputItems) {\n  const items = formatToArrayOfObjects(inputItems)\n\n  const hasValueProperty = (currentValue) => null != currentValue.value\n  const isAllValid = items.every(hasValueProperty)\n  if (!isAllValid) {\n    throw new Error('Invalid Data Found, All items must have a value property')\n  }\n\n\n  const total = items.reduce((acc, item) => acc + item.value, 0)\n  return items\n    .map((item) => ({\n      ...item,\n      percentage: (item.value / total) * 100\n    }))\n    .map(formatLabel)\n    .map(formatColor)\n}\n","import { createElement, setAttributeForSvg } from './elements'\nimport {\n  drawingCoordinatesBetweenInnerAndOuterCircle,\n  drawingCoordinatesinCircle\n} from './calculations'\nimport { reverseString } from \"./formatter\";\n\nfunction createArc({ x, y }, { startAngle, endAngle }, outerRadius, color) {\n  const chartPath = createElement('path', [\n    ['fill', color],\n    ['class', 'path-container'],\n    ['stroke-width', '0']\n  ])\n\n  const chartPositionData = drawingCoordinatesinCircle(\n    { x, y },\n    { startAngle, endAngle },\n    outerRadius\n  )\n\n  // identify center between start and end angle\n  // set label position,and use it\n\n  setAttributeForSvg(chartPath, 'd', chartPositionData)\n  return chartPath\n}\n\nfunction createTextDefinition(textId, innerAndOuterRadius, angles, point) {\n  const textPathDefinitionElement = createElement('defs', [])\n\n  const pathToDrawTextElement = createElement('path', [\n    ['id', textId],\n    ['stroke-width', '0']\n  ])\n  textPathDefinitionElement.appendChild(pathToDrawTextElement)\n  const drawingCoordinatesForText =\n    drawingCoordinatesBetweenInnerAndOuterCircle(\n      innerAndOuterRadius,\n      angles,\n      point\n    )\n  pathToDrawTextElement.setAttributeNS(null, 'd', drawingCoordinatesForText)\n  return textPathDefinitionElement\n}\n\nfunction createTextElement(textId,{label,labelSize,labelColor}) {\n  const textElement = createElement('text', [\n    ['font-size', labelSize + 'px'],\n    ['fill', labelColor],\n    ['rotate', '180']\n  ])\n  const textPathElement = createElement('textPath', [\n    ['href', '#' + textId],\n    ['text-anchor', 'top'],\n    ['startOffset', '0%']\n  ])\n\n  //180 degree reverses stuff\n  textPathElement.innerHTML =reverseString(label)\n  textElement.appendChild(textPathElement)\n  return textElement\n}\n\nfunction getTextElements(id, {label,labelSize,labelColor}, innerAndOuterRadius, angles, point) {\n  const textId = 'text' + id\n  const textPositionPathElement = createTextDefinition(\n    textId,\n    innerAndOuterRadius,\n    angles,\n    point\n  )\n  const textElement = createTextElement(textId, {label,labelSize,labelColor})\n\n  return {\n    textPositionPathElement,\n    textElement\n  }\n}\nexport function getRandomSixDigitString() {\n  const str = '' + Math.floor(Math.random() * (999999 - 1)) + 1\n  return str.padStart(6, '0')\n}\n\n// export function sliceElement(\n//   { startAngle, endAngle },\n//   { label, item, color },\n//   { x, y },\n//   { innerRadius, outerRadius }\n// )\n\nexport function getSliceElement(\n  angles,\n  { label, value, color },\n  point,\n  { innerRadius, outerRadius },\n  {labelSize,labelColor}\n) {\n  const id = 'box' + value + getRandomSixDigitString()\n  const container = createElement('a', [\n    ['id', 'container' + id],\n    ['href', '#'],\n    ['style', 'text-decoration: none;']\n  ])\n  const arc = createArc(point, angles, outerRadius, color)\n\n  container.appendChild(arc)\n  const { textPositionPathElement, textElement } = getTextElements(\n    id,\n    {label,labelSize,labelColor},\n    { innerRadius, outerRadius },\n    angles,\n    point\n  )\n  container.appendChild(textPositionPathElement)\n  container.appendChild(textElement)\n\n  return container\n}\n","import { createElement } from './elements'\nimport {  drawingCoordinatesinCircle } from \"./calculations\";\nimport { getHtmlContainerElement } from './HtmlContainerElement'\nimport { getSliceElement } from './SliceElement'\nimport { formatItems } from \"./formatter\";\n\nfunction createArcFrom(point, angles, radius) {\n  const innerArc = createElement('path', [])\n  const innerArcData = drawingCoordinatesinCircle(point, angles, radius)\n  innerArc.setAttributeNS(null, 'd', innerArcData)\n  return innerArc\n}\n\nconst thicknessWithRatio = {\n  XXL: 125,\n  XL: 100,\n  L: 75,\n  M: 50,\n  S: 35\n}\n\nconst sizeWithAngles = {\n  XXL: [261, 460],\n  XL: [241, 480],\n  L: [221, 500],\n  M: [201, 520],\n  S: [181, 540]\n}\nconst colors = [\n  '#FF0000',\n  '#FF7F00',\n  '#FFFF00',\n  '#00FF00',\n  '#00FFFF',\n  '#0000FF',\n  '#8B00FF'\n]\n\nfunction getCircle({ x, y }, radius, defaultcolor) {\n  return createElement('circle', [\n    ['cx', x],\n    ['cy', y],\n    ['r', radius],\n    ['fill', defaultcolor]\n  ])\n}\n\n\nexport function DoughnutElement(\n  items,\n  { radius, title, thicknessSize, gapSize, backgroundColor, imgUrl,  titleColor,labelSize,labelColor }\n) {\n  const thicknessOfCircle = thicknessWithRatio[thicknessSize]\n  const totalSize = (radius + thicknessOfCircle) * 2\n  const x = totalSize / 2\n  const y = totalSize / 2\n  const outerRadius = radius + thicknessOfCircle\n  const sizeWithAngle = sizeWithAngles[gapSize]\n  const [startAngle, endAngle] = sizeWithAngle\n  const total = (endAngle - startAngle) / 100\n  const percentageToDegree = (percent) => percent * total\n\n  const container = createElement('g', [])\n\n  const innerArc = createArcFrom({ x, y }, { startAngle, endAngle }, radius)\n  const outerArc = createArcFrom(\n    { x, y },\n    { startAngle, endAngle },\n    outerRadius\n  )\n\n  container.appendChild(outerArc)\n  container.appendChild(innerArc)\n\n  let initAngle = startAngle\n\n\n  const formattedItems = formatItems(items)\n\n  formattedItems.forEach((item, index) => {\n    let {label, value,color,percentage} = item\n    // if(undefined == value){\n    //   label = \"\" + item\n    //   value = item;\n    //   color =colors[index]\n    // }else {\n    //\n    //   let formattedItem = item || { label: '' +item.value, color: colors[index] }\n    //   label = formattedItem.label\n    //   color = formattedItem.color\n    //   value = formattedItem.value\n    // }\n\n    console.log(label)\n    console.log(color)\n    console.log(value)\n    const endAngle = initAngle + percentageToDegree(percentage)\n\n    const currentBoxElement = getSliceElement(\n      { startAngle: initAngle, endAngle },\n      {label, value,color},\n      { x, y },\n      { innerRadius: radius, outerRadius: outerRadius },{labelSize,labelColor}\n    )\n\n    container.appendChild(currentBoxElement)\n    initAngle = endAngle\n  })\n\n  const htmlContainerElement = getHtmlContainerElement(\n    { x, y },\n    radius,\n    imgUrl,\n    title,\n    titleColor\n  )\n  const backgroundCircle = getCircle({ x, y }, radius, backgroundColor)\n\n  container.appendChild(backgroundCircle)\n  container.appendChild(htmlContainerElement)\n\n  const root = createElement('svg', [\n    ['width', totalSize],\n    ['height', totalSize]\n  ])\n  root.appendChild(container)\n  return root.outerHTML\n}\n","import React, { useEffect, useState } from \"react\";\nimport styles from './styles.module.css'\nimport { DoughnutElement } from \"./core/DoughnutElement\";\n\nexport const CroppedDoughnutChart = ({ text }) => {\n\n\n  const [state, setState] = useState(\"\");\n\n  useEffect(() => {\n\n\n\n    const items =[\n      { value:24,color:\"red\"},\n      { value:227,color:\"blue\"},\n      { value:49,color:\"pink\"},\n    ]\n\n    //const items =[98,78,56]\n\n\n    let imgUrl = \"https://www.w3schools.com/html/pic_trulli.jpg\";\n    // <svg id=\"root\">\n    // </svg>\n   const result= DoughnutElement(items,{\n     radius: 100,\n     width: 200,\n     title:\"Halo\",\n     titleColor:\"#FF0000\",\n     thicknessSize:\"M\",\n     gapSize:\"XL\",\n     labelSize:12,\n     labelColor:\"white\",\n     backgroundColor:\"white\",\n     imgUrl\n\n   } )\n    setState(result);\n\n\n\n  }, [])\n\n  return   <div dangerouslySetInnerHTML={{ __html: state }} />\n\n\n}\n"],"names":["SVG_NAMESPACE","createElement","name","attribs","xmlns","svgElem","document","createElementNS","forEach","value","setAttributeNS","createHtmlElement","element","setAttribute","setAttributeForSvg","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","Math","PI","x","cos","y","sin","drawingCoordinatesinCircle","startAngle","endAngle","startPoint","endPoint","arcSweep","d","join","drawingCoordinatesBetweenInnerAndOuterCircle","innerRadius","outerRadius","middleRadius","middleAngle","drawingCoordinatesForText","PADDING_RATIO","getHtmlContainerElement","imgUrl","title","textColor","mainElement","paddedRadius","imgElement","breakElement","appendChild","innerHTML","container","paddedX","paddedY","width","height","foreignObject","colors","formatLabel","item","label","formatColor","index","color","formatToArrayOfObjects","inputItems","isNumber","currentValue","isAllNumbers","every","items","map","reverseString","str","split","reverse","formatItems","hasValueProperty","isAllValid","Error","total","reduce","acc","percentage","createArc","chartPath","chartPositionData","createTextDefinition","textId","innerAndOuterRadius","angles","point","textPathDefinitionElement","pathToDrawTextElement","createTextElement","labelSize","labelColor","textElement","textPathElement","getTextElements","id","textPositionPathElement","getRandomSixDigitString","floor","random","padStart","getSliceElement","arc","createArcFrom","innerArc","innerArcData","thicknessWithRatio","XXL","XL","L","M","S","sizeWithAngles","getCircle","defaultcolor","DoughnutElement","thicknessSize","gapSize","backgroundColor","titleColor","thicknessOfCircle","totalSize","sizeWithAngle","percentageToDegree","percent","outerArc","initAngle","formattedItems","console","log","currentBoxElement","htmlContainerElement","backgroundCircle","root","outerHTML","CroppedDoughnutChart","text","state","setState","useState","useEffect","result","__html"],"mappings":"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"}